<!DOCTYPE html>
<html lang="th">
<head>
┬а <meta charset="utf-8" />
┬а <meta name="viewport" content="width=device-width, initial-scale=1" />
┬а <meta name="theme-color" content="#0a0f0b">
┬а <title>EVAN VALE тАв Christmas Event | р╣Ар╕Хр╕┤р╕бр╣Ар╕Бр╕бр╕гр╕▓р╕Др╕▓р╕Фр╕╡ р╣Вр╕Ыр╕гр╣Ир╕Зр╣Гр╕к р╕бр╕╡р╣Бр╕нр╕Фр╕бр╕┤р╕Щр╕Фр╕╣р╣Бр╕е</title>
┬а <meta name="description" content="EVAN VALE Christmas Event тАФ р╣Ар╕Хр╕┤р╕бр╣Ар╕Бр╕бр╕гр╕▓р╕Др╕▓р╕Фр╕╡ р╣Вр╕Ыр╕гр╣Ир╕Зр╣Гр╕к р╕Ыр╕ер╕нр╕Фр╕ар╕▒р╕в р╕бр╕╡р╣Бр╕нр╕Фр╕бр╕┤р╕Щр╕Фр╕╣р╣Бр╕е 24 р╕Кр╕▒р╣Ир╕зр╣Вр╕бр╕З р╕гр╕нр╕Зр╕гр╕▒р╕Ъ TrueMoney, PromptPay р╣Бр╕ер╕░р╕Шр╕Щр╕▓р╕Др╕▓р╕г" />

┬а <style>
/* ===== MOBILE (<=480px) ===== */
@media (max-width: 480px){
┬а .wrap{padding:16px}
┬а .nav{gap:10px; padding:12px}
┬а .nav .tools{width:100%; display:grid; grid-template-columns:1fr 1fr; gap:8px}
┬а .nav .tools .btn{width:100%; min-height:44px; display:flex; align-items:center; justify-content:center}
┬а .nav .tools .btn.primary{grid-column:1 / -1}

┬а .hero{grid-template-columns:1fr; gap:14px}
┬а .grid.two{grid-template-columns:1fr}
┬а .tabs{display:grid; grid-template-columns:1fr 1fr; gap:8px}
┬а .tab{width:100%; text-align:center}
┬а .grid.pkg{grid-template-columns:repeat(2,minmax(0,1fr))}
┬а .grid.pkg .glass{display:grid; align-content:start; min-height:128px !important}
┬а .price{font-size:18px}
┬а .row{grid-template-columns:1fr; gap:10px}
┬а h1{font-size:22px}
┬а /* р╕Лр╣Ир╕нр╕Щр╕Ыр╕╕р╣Ир╕бр╕Лр╣Йр╕│р╣Гр╕Щ NAV (р╣Ар╕лр╕ер╕╖р╕нр╕Ыр╕╕р╣Ир╕бр╕Хр╕┤р╕Фр╕Хр╣Ир╕нр╣Бр╕нр╕Фр╕бр╕┤р╕Щ) */
┬а .nav .tools a[href="#packages"],
┬а .nav .tools a[href="#order"],
┬а .nav .tools a[href="#history"]{ display:none; }
}

/* ===== TABLE SCROLL ===== */
.table-scroll{overflow-x:auto; -webkit-overflow-scrolling:touch}
.table-scroll table{min-width:720px}

/* ===== THEME: CHRISTMAS ===== */
:root{
┬а --bg:#0a0f0b; --bg2:#0f1a12;
┬а --glass:#0e1511cc; --panel:#0f1a12; --card:#101d15;
┬а --text:#f8fff6; --muted:#cde3cf; --muted2:#b8d2bb;
┬а --brand:#e53935; ┬а ┬а /* red */
┬а --brand2:#36c06b; ┬а ┬а/* green */
┬а --accent:#ffd166; ┬а ┬а/* gold */
┬а --warn:#ff6b6b;
┬а --border:#203326; --shadow:0 20px 60px rgba(0,0,0,.55); --radius:18px;
}
*{box-sizing:border-box} html,body{height:100%}
body{
┬а margin:0; color:var(--text); font-family:system-ui,Segoe UI,Prompt,sans-serif;
┬а background:
┬а ┬а radial-gradient(1100px 600px at 0% 0%, #19301f 0%, transparent 60%),
┬а ┬а radial-gradient(900px 700px at 100% 0%, #2a1a1a 0%, transparent 60%),
┬а ┬а radial-gradient(900px 900px at 50% 120%, #112019 0%, transparent 60%),
┬а ┬а linear-gradient(180deg, var(--bg), var(--bg2));
}
/* р╕ер╕▓р╕вр╕Юр╕╖р╣Йр╕Щр╕лр╕ер╕▒р╕Зр╕Шр╕╡р╕бр╕Др╕гр╕┤р╕кр╕Хр╣Мр╕бр╕▓р╕к + р╕лр╕┤р╕бр╕░ */
body::before{
┬а content:"";position:fixed;inset:0;z-index:-2;
┬а background:url("christmas-bg.png") center/cover no-repeat;
┬а opacity:.10;pointer-events:none;mix-blend-mode:screen;
}
/* р╕лр╕┤р╕бр╕░р╕Хр╕Бр╣Ар╕Ър╕▓р╣Ж */
body::after{
┬а content:""; position:fixed; inset:-100px 0 0 0; z-index:-1; pointer-events:none;
┬а background-image:
┬а ┬а radial-gradient(2px 2px at 20% 20%,#fff8 90%,transparent 100%),
┬а ┬а radial-gradient(2px 2px at 60% 30%,#fff8 90%,transparent 100%),
┬а ┬а radial-gradient(2px 2px at 80% 70%,#fff8 90%,transparent 100%),
┬а ┬а radial-gradient(2px 2px at 30% 80%,#fff8 90%,transparent 100%),
┬а ┬а radial-gradient(2px 2px at 10% 60%,#fff8 90%,transparent 100%);
┬а **animation:snow 5s linear infinite;** /* ЁЯЪй р╣Бр╕Бр╣Йр╕Др╕зр╕▓р╕бр╣Ар╕гр╣Зр╕зр╣Ар╕Ыр╣Зр╕Щ 5 р╕зр╕┤р╕Щр╕▓р╕Чр╕╡ */
}
@keyframes snow{
┬а 0%{ transform:translateY(-100px) }
┬а 100%{ transform:translateY(100px) }
}

a{color:var(--accent);text-decoration:none} img{max-width:100%;display:block}
.wrap{max-width:1100px;margin:auto;padding:20px}

.nav{
┬а display:flex;justify-content:space-between;align-items:center;gap:12px;
┬а background:linear-gradient(180deg,#132017,#0e1812);
┬а border:1px solid var(--border);border-radius:20px;padding:10px 14px;
┬а box-shadow:var(--shadow);backdrop-filter: blur(8px);position:sticky;top:12px;z-index:10
}
.brand{display:flex;gap:12px;align-items:center}
.logo{
┬а width:42px;height:42px;border-radius:12px;
┬а background:conic-gradient(from 220deg,#e53935,#36c06b,#ffd166,#e53935);
┬а display:grid;place-items:center;font-weight:900;color:#1b0d0d;box-shadow:0 0 18px #ffd16640
}
.site-badge{
┬а font-size:12px;color:#ffe6a8;background:#182416;border:1px solid #274426;
┬а padding:3px 8px;border-radius:999px;display:inline-flex;gap:6px;align-items:center
}
.btn{padding:9px 14px;border-radius:12px;border:1px solid var(--border);background:linear-gradient(180deg,#14241a,#0f1b14);color:#f2fff2;font-weight:700;cursor:pointer}
.btn[disabled]{opacity:.6;pointer-events:none}
.btn.primary{
┬а background:linear-gradient(90deg,var(--brand),var(--brand2));
┬а color:#1b0d0d;border:none;
┬а box-shadow:0 0 10px #ffd16650,0 0 28px #36c06b40;text-shadow:0 0 6px rgba(255,230,170,.6)
}

.hero{margin-top:16px;display:grid;grid-template-columns:2fr 1fr;gap:18px}
.glass{
┬а background:linear-gradient(180deg,var(--glass),#0e1712cc);
┬а border:1px solid var(--border);border-radius:var(--radius);padding:18px;box-shadow:var(--shadow);backdrop-filter: blur(10px)
}
.badge{padding:6px 10px;border-radius:999px;background:#1b2a1e;border:1px solid var(--border);display:inline-flex;gap:8px;align-items:center}
.drip{text-shadow:0 2px 0 #000,0 0 12px rgba(255,209,102,.40),0 0 26px rgba(54,192,107,.35)}
.statgrid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:12px}
.stat{background:#16281d;border:1px solid var(--border);border-radius:14px;text-align:center;padding:14px}
.muted{color:var(--muted)} .muted2{color:var(--muted2)}
.section{margin-top:22px}
.grid{display:grid;gap:16px}
.grid.pkg{grid-template-columns:repeat(auto-fit,minmax(180px,1fr))}
.grid.two{grid-template-columns:2fr 1fr}
.card{background:#102219;border:1px solid var(--border);border-radius:16px;padding:16px;box-shadow:var(--shadow)}
label{display:block;margin-bottom:6px;color:#d6f0d8}
input,select,textarea{width:100%;background:#0f1a13;border:1px solid var(--border);color:var(--text);padding:12px;border-radius:12px}
.price{font-size:22px;font-weight:900}
.row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.summary{position:sticky;top:84px}
.list{display:flex;flex-direction:column;gap:8px}
.item{display:flex;justify-content:space-between;gap:10px}
.total{font-size:22px;font-weight:900}
.tabs{display:flex;gap:8px;flex-wrap:wrap;margin:10px 0 0}
.tab{padding:8px 12px;border:1px solid var(--border);border-radius:999px;background:#132319;cursor:pointer}
.tab.active{
┬а background:linear-gradient(90deg,var(--brand),var(--brand2));color:#1b0d0d;border:none;box-shadow:0 0 10px #ffd16650
}
.neon{box-shadow:0 0 12px rgba(255,209,102,.25),0 0 24px rgba(54,192,107,.18),inset 0 0 0 1px rgba(255,209,102,.18);border:1px solid rgba(255,209,102,.25);border-radius:14px;padding:12px;margin-top:10px}
.neon h3{margin:0 0 6px;font-size:16px;text-shadow:0 0 12px rgba(255,209,102,.35)}
.mini-sum .row-line{display:flex;justify-content:space-between;gap:10px;padding:4px 0;border-bottom:1px dashed rgba(255,255,255,.06)}
.mini-sum .row-line:last-child{border-bottom:0}
.ribbon{
┬а position:absolute;right:14px;top:-10px;rotate:8deg;
┬а background:linear-gradient(90deg,#e53935,#36c06b);
┬а color:#1b0d0d;padding:6px 12px;border-radius:8px;font-weight:900;
┬а box-shadow:0 6px 18px #36c06b60;border:1px solid #5c2a00
}
@media (max-width:980px){.hero{grid-template-columns:1fr}.grid.two{grid-template-columns:1fr}.summary{position:static}}

/* ===== AUTH ===== */
.auth{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.6);backdrop-filter:blur(6px);z-index:50}
.auth.hide{display:none}
.panel{width:min(520px,92vw);background:#0e1813;border:1px solid var(--border);border-radius:18px;box-shadow:var(--shadow);padding:20px}
.pair{display:grid;grid-template-columns:140px 1fr;gap:8px;align-items:center;margin:8px 0}
.note{font-size:12px;color:#cde3cf}

/* ===== HISTORY ===== */
table{width:100%;border-collapse:collapse}
th,td{padding:10px;border-bottom:1px solid rgba(255,255,255,.06);text-align:left}
th{color:#ffe6a8}
.tools{display:flex;gap:8px;flex-wrap:wrap}
.pill{display:inline-flex;gap:6px;align-items:center;padding:4px 8px;border:1px solid var(--border);border-radius:999px;background:#132319}

/* ===== р╕Ыр╕╕р╣Ир╕бр╣Гр╕Хр╣Йр╕Бр╕▓р╕гр╣Мр╕Фр╕Вр╕зр╕▓ ===== */
.hero-cta{display:grid; grid-template-columns:repeat(3,minmax(0,1fr)); gap:10px; width:100%; margin-top:12px}
.hero-cta .btn{width:100%; text-align:center}
@media (max-width:480px){ .hero-cta{ grid-template-columns:1fr } }
┬а </style>
</head>
<body>

<div class="auth" id="auth">
┬а <div class="panel">
┬а ┬а <h2 id="authTitle">┬ар╕кр╕гр╣Йр╕▓р╕Зр╕Ър╕▒р╕Нр╕Кр╕╡р╕Др╕гр╕▒р╣Йр╕Зр╣Бр╕гр╕Б</h2>
┬а ┬а <p id="authDesc" class="muted2">р╕Хр╕▒р╣Йр╕Зр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й + PIN (р╣Ар╕Бр╣Зр╕Ър╣Ар╕Йр╕Юр╕▓р╕░р╣Гр╕Щр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕Щр╕╡р╣Й)</p>

┬а ┬а <div id="setupForm">
┬а ┬а ┬а <div class="pair"><label>р╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й</label><input id="setupUser" placeholder="р╣Ар╕Кр╣Ир╕Щ evan" /></div>
┬а ┬а ┬а <div class="pair"><label>PIN</label><input id="setupPin" type="password" inputmode="numeric" maxlength="6" placeholder="4тАУ6 р╕Хр╕▒р╕зр╣Ар╕ер╕В" /></div>
┬а ┬а ┬а <div class="pair"><label>р╕вр╕╖р╕Щр╕вр╕▒р╕Щ PIN</label><input id="setupPin2" type="password" inputmode="numeric" maxlength="6" placeholder="р╕Юр╕┤р╕бр╕Юр╣Мр╕Лр╣Йр╕│" /></div>
┬а ┬а ┬а <div class="pair"><label>р╕Кр╕╖р╣Ир╕нр╣Гр╕Щр╕Ър╕┤р╕е</label><input id="setupName" placeholder="р╣Ар╕Кр╣Ир╕Щ Ryu" /></div>
┬а ┬а ┬а <div class="pair"><label>р╕Кр╣Ир╕нр╕Зр╕Чр╕▓р╕Зр╕Хр╕┤р╕Фр╕Хр╣Ир╕н</label><input id="setupContact" placeholder="Line/FB/Tel" /></div>
┬а ┬а ┬а <div class="tools"><button class="btn primary" id="btnSetup">р╕кр╕гр╣Йр╕▓р╕Зр╕Ър╕▒р╕Нр╕Кр╕╡</button></div>
┬а ┬а ┬а <div class="note">р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕Бр╣Зр╕Ър╣Гр╕Щ LocalStorage р╕Вр╕нр╕Зр╣Ар╕Ър╕гр╕▓р╕зр╣Мр╣Ар╕Лр╕нр╕гр╣Мр╕Щр╕╡р╣Й</div>
┬а ┬а </div>

┬а ┬а <div id="loginForm" style="display:none">
┬а ┬а ┬а <div class="pair"><label>р╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й</label><input id="loginUser" placeholder="р╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й" /></div>
┬а ┬а ┬а <div class="pair"><label>PIN</label><input id="loginPin" type="password" inputmode="numeric" maxlength="6" placeholder="PIN" /></div>
┬а ┬а ┬а <div class="tools">
┬а ┬а ┬а ┬а <button class="btn primary" id="btnLogin">р╣Ар╕Вр╣Йр╕▓р╕гр╕░р╕Ър╕Ъ</button>
┬а ┬а ┬а ┬а <button class="btn" id="btnForgot">р╕ер╕╖р╕б PIN</button>
┬а ┬а ┬а </div>
┬а ┬а ┬а <div class="note">р╕ер╕╖р╕б PIN тЖТ р╣Гр╕Кр╣Й тАЬр╕гр╕╡р╣Ар╕Лр╣Зр╕Хр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕ФтАЭ р╣Гр╕Щр╕лр╕Щр╣Йр╕▓ тАЬр╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤тАЭ</div>
┬а ┬а </div>
┬а </div>
</div>

<div class="wrap">
┬а ┬а <nav class="nav">
┬а ┬а <div class="brand">
┬а ┬а ┬а <div class="logo">EV</div>
┬а ┬а ┬а <div>
┬а ┬а ┬а ┬а <div style="font-weight:900;letter-spacing:.5px">EVAN VALE</div>
┬а ┬а ┬а ┬а <div class="site-badge">┬аChristmas Event тАв р╣Ар╕Хр╕┤р╕бр╣Др╕з р╕Ыр╕ер╕нр╕Фр╕ар╕▒р╕в</div>
┬а ┬а ┬а </div>
┬а ┬а ┬а <div class="tools">
┬а ┬а ┬а ┬а <a class="btn" href="#packages">р╣Бр╕Юр╣Зр╕Бр╣Ар╕Бр╕И</a>
┬а ┬а ┬а ┬а <a class="btn" href="#order">р╕кр╕▒р╣Ир╕Зр╣Ар╕Хр╕┤р╕б</a>
┬а ┬а ┬а ┬а <a class="btn" href="#history">р╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤</a>
┬а ┬а ┬а ┬а <a class="btn primary" id="btnAdminNav" href="https://www.facebook.com/share/1ALsnFkkdW/" target="_blank" rel="noopener">р╕Хр╕┤р╕Фр╕Хр╣Ир╕нр╣Бр╕нр╕Фр╕бр╕┤р╕Щ</a>
┬а ┬а ┬а ┬а <button class="btn" id="btnLogout" style="display:none">р╕нр╕нр╕Бр╕Ир╕▓р╕Бр╕гр╕░р╕Ър╕Ъ</button>
┬а ┬а ┬а </div>
┬а ┬а </div>
┬а </nav>

┬а ┬а <section class="hero">
┬а ┬а ┬а ┬а <div class="glass" style="position:relative">
┬а ┬а ┬а <span class="ribbon">CHRISTMAS┬а</span>
┬а ┬а ┬а <span class="badge">┬ар╣Ар╕Ыр╕┤р╕Фр╕гр╕▒р╕Ър╕нр╕нр╣Ар╕Фр╕нр╕гр╣М 08:30тАУ21:30</span>
┬а ┬а ┬а <h1 class="drip">EVAN VALE тАФ р╕гр╕▓р╕Др╕▓р╕Фр╕╡ р╣Вр╕Ыр╕гр╣Ир╕Зр╣Гр╕к <span style="color:var(--accent)">р╕бр╕╡р╣Бр╕нр╕Фр╕бр╕┤р╕Щр╕Фр╕╣р╣Бр╕е</span></h1>
┬а ┬а ┬а <div class="statgrid">
┬а ┬а ┬а ┬а <div class="stat"><div style="font-size:20px;font-weight:900">3тАУ10 р╕Щр╕▓р╕Чр╕╡*</div><div class="muted2">р╣Вр╕Фр╕вр╣Ар╕Йр╕ер╕╡р╣Ир╕в</div></div>
┬а ┬а ┬а ┬а <div class="stat"><div style="font-size:20px;font-weight:900">1000+</div><div class="muted2">р╕гр╕▓р╕вр╕Бр╕▓р╕гр╕кр╕│р╣Ар╕гр╣Зр╕И</div></div>
┬а ┬а ┬а ┬а <div class="stat"><div style="font-size:20px;font-weight:900">0%</div><div class="muted2">р╕вр╕╢р╕Ф UID</div></div>
┬а ┬а ┬а </div>
┬а ┬а ┬а <p class="muted2" style="margin-top:8px">*р╕Кр╣Ир╕зр╕Зр╕Юр╕╡р╕Д/р╣Ар╕Бр╕бр╕Ыр╕┤р╕Фр╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕Зр╕нр╕▓р╕Ир╕Кр╣Йр╕▓р╕Бр╕зр╣Ир╕▓р╕Ыр╕Бр╕Хр╕┤</p>
┬а ┬а </div>

┬а ┬а ┬а ┬а <div class="glass" style="display:grid;place-items:center;text-align:center">
┬а ┬а ┬а <div style="font-weight:800">р╣Бр╕нр╕Фр╕бр╕┤р╕Щр╕Хр╕нр╕Ър╣Др╕з</div>
┬а ┬а ┬а <div class="muted2">р╣Ар╕ер╕╖р╕нр╕Бр╣Ар╕бр╕Щр╕╣р╕Фр╣Йр╕▓р╕Щр╕ер╣Ир╕▓р╕Зр╣Др╕Фр╣Йр╣Ар╕ер╕в</div>
┬а ┬а ┬а <div class="hero-cta">
┬а ┬а ┬а ┬а <a class="btn" href="#packages">р╣Бр╕Юр╣Зр╕Бр╣Ар╕Бр╕И</a>
┬а ┬а ┬а ┬а <a class="btn primary" href="#order">р╕кр╕▒р╣Ир╕Зр╣Ар╕Хр╕┤р╕б</a>
┬а ┬а ┬а ┬а <a class="btn" href="#history">р╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤</a>
┬а ┬а ┬а </div>
┬а ┬а </div>
┬а </section>

┬а ┬а <section id="packages" class="section">
┬а ┬а <div class="card">
┬а ┬а ┬а <h2 style="margin:0">р╣Бр╕Юр╣Зр╕Бр╣Ар╕Бр╕Ир╕вр╕нр╕Фр╕ор╕┤р╕Х</h2>
┬а ┬а ┬а <div class="tabs" id="game-tabs"></div>
┬а ┬а ┬а <p class="muted2" style="margin:6px 0 10px">р╕Др╕ер╕┤р╕Б тАЬр╣Ар╕ер╕╖р╕нр╕Бр╣Бр╕Юр╣Зр╕БтАЭ р╣Ар╕Юр╕╖р╣Ир╕нр╕Бр╕гр╕нр╕Бр╕Яр╕нр╕гр╣Мр╕бр╣Гр╕лр╣Йр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤</p>
┬а ┬а ┬а <div class="grid pkg" id="pkg-grid"></div>
┬а ┬а </div>
┬а </section>

┬а ┬а <section id="order" class="section grid two" style="align-items:start">
┬а ┬а <div class="card">
┬а ┬а ┬а <h2 style="margin-top:0">р╕кр╕▒р╣Ир╕Зр╣Ар╕Хр╕┤р╕бр╣Ар╕Бр╕б</h2>

┬а ┬а ┬а <div class="row">
┬а ┬а ┬а ┬а <div>
┬а ┬а ┬а ┬а ┬а <label>р╣Ар╕Бр╕б</label>
┬а ┬а ┬а ┬а ┬а <select id="game"></select>
┬а ┬а ┬а ┬а ┬а <p id="gameNote" style="display:none;color:#ffd166;font-size:14px;margin:6px 0 0"></p>
┬а ┬а ┬а ┬а ┬а <p id="thaiOnlyNote" style="display:none;color:#ffd166;font-size:14px;margin:6px 0 0;background:#142318;padding:6px 10px;border-radius:6px;border-left:3px solid var(--brand);">
┬а ┬а ┬а ┬а ┬а ┬а┬а┬ар╣Ар╕Бр╕бр╕Щр╕╡р╣Йр╕гр╕нр╕Зр╕гр╕▒р╕Ър╣Ар╕Йр╕Юр╕▓р╕░ <b>р╣Ар╕Лр╕┤р╕гр╣Мр╕Яр╣Ар╕зр╕нр╕гр╣Мр╣Др╕Чр╕в</b> р╣Ар╕Чр╣Ир╕▓р╕Щр╕▒р╣Йр╕Щ (Free Fire / RoV / PUBG Mobile / Roblox / Call of Duty)
┬а ┬а ┬а ┬а ┬а </p>
┬а ┬а ┬а ┬а ┬а <div class="neon mini-sum" id="miniSum" style="display:none">
┬а ┬а ┬а ┬а ┬а ┬а <h3>р╕кр╕гр╕╕р╕Ыр╕Др╕гр╣Ир╕▓р╕зр╣Ж</h3>
┬а ┬а ┬а ┬а ┬а ┬а <div class="row-line"><span class="label">р╣Ар╕Бр╕б</span><span class="value" id="mini-game">-</span></div>
┬а ┬а ┬а ┬а ┬а ┬а <div class="row-line"><span class="label">р╣Ар╕Лр╕┤р╕гр╣Мр╕Яр╣Ар╕зр╕нр╕гр╣М</span><span class="value" id="mini-server">-</span></div>
┬а ┬а ┬а ┬а ┬а ┬а <div class="row-line"><span class="label">р╣Бр╕Юр╣Зр╕Бр╣Ар╕Бр╕И</span><span class="value" id="mini-pkg">-</span></div>
┬а ┬а ┬а ┬а ┬а ┬а <div class="row-line"><span class="label">р╕вр╕нр╕Ф</span><span class="value" id="mini-total">р╕┐0</span></div>
┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а <div>
┬а ┬а ┬а ┬а ┬а <label>р╣Вр╕Лр╕Щ/р╣Ар╕Лр╕┤р╕гр╣Мр╕Яр╣Ар╕зр╕нр╕гр╣М</label>
┬а ┬а ┬а ┬а ┬а <select id="server"></select>
┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а </div>

┬а ┬а ┬а <div class="row">
┬а ┬а ┬а ┬а <div>
┬а ┬а ┬а ┬а ┬а <label>UID / Player ID</label>
┬а ┬а ┬а ┬а ┬а <input id="uid" placeholder="р╣Ар╕Кр╣Ир╕Щ 812345678 р╕лр╕гр╕╖р╕нр╕Кр╕╖р╣Ир╕нр╣Гр╕Щр╣Ар╕Бр╕б">
┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а <div>
┬а ┬а ┬а ┬а ┬а <label>р╣Бр╕Юр╣Зр╕Бр╣Ар╕Бр╕И</label>
┬а ┬а ┬а ┬а ┬а <select id="package"></select>
┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а </div>

┬а ┬а ┬а <div class="row">
┬а ┬а ┬а ┬а <div>
┬а ┬а ┬а ┬а ┬а <label>р╕зр╕┤р╕Шр╕╡р╕Кр╕│р╕гр╕░</label>
┬а ┬а ┬а ┬а ┬а <select id="method">
┬а ┬а ┬а ┬а ┬а ┬а <option>PromptPay</option>
┬а ┬а ┬а ┬а ┬а ┬а <option>TrueMoney Wallet</option>
┬а ┬а ┬а ┬а ┬а ┬а <option>р╣Вр╕нр╕Щр╕Шр╕Щр╕▓р╕Др╕▓р╕г</option>
┬а ┬а ┬а ┬а ┬а </select>
┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а <div>
┬а ┬а ┬а ┬а ┬а <label>р╣Вр╕Др╣Йр╕Фр╕кр╣Ир╕зр╕Щр╕ер╕Ф (р╕Цр╣Йр╕▓р╕бр╕╡)</label>
┬а ┬а ┬а ┬а ┬а <input id="promo" placeholder="р╣Ар╕Кр╣Ир╕Щ EVAN10">
┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а </div>

┬а ┬а ┬а <div class="row">
┬а ┬а ┬а ┬а <div>
┬а ┬а ┬а ┬а ┬а <label>р╕Кр╕╖р╣Ир╕нр╕ер╕╣р╕Бр╕Др╣Йр╕▓</label>
┬а ┬а ┬а ┬а ┬а <input id="name" placeholder="р╕Кр╕╖р╣Ир╕нр╣Ар╕ер╣Ир╕Щр╕Бр╣Зр╣Др╕Фр╣Й">
┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а <div>
┬а ┬а ┬а ┬а ┬а <label>р╕Кр╣Ир╕нр╕Зр╕Чр╕▓р╕Зр╕Хр╕┤р╕Фр╕Хр╣Ир╕н</label>
┬а ┬а ┬а ┬а ┬а <input id="contact" placeholder="Line/FB/Tel">
┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а </div>

┬а ┬а ┬а <div class="tools" style="margin-top:12px">
┬а ┬а ┬а ┬а <button class="btn" id="btnReset" type="button">р╕ер╣Йр╕▓р╕Зр╕Яр╕нр╕гр╣Мр╕б</button>
┬а ┬а ┬а ┬а <button class="btn primary" id="btnSubmit" type="button" disabled>р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╣Бр╕ер╕░р╕кр╕гр╣Йр╕▓р╕Зр╕Ър╕┤р╕е</button>
┬а ┬а ┬а ┬а <button class="btn" id="btnSaveProfile" type="button" disabled>р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕ер╕╣р╕Бр╕Др╣Йр╕▓</button>
┬а ┬а ┬а </div>
┬а ┬а ┬а <p class="muted2" style="margin-top:8px">р╕Бр╕Фр╕вр╕╖р╕Щр╕вр╕▒р╕Щр╣Бр╕ер╣Йр╕зр╕Ир╕░р╣Ар╕ер╕╖р╣Ир╕нр╕Щр╣Др╕Ыр╕кр╣Ир╕зр╕Щ тАЬр╕Кр╕│р╕гр╕░р╣Ар╕Зр╕┤р╕ЩтАЭ р╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤</p>
┬а ┬а </div>

┬а ┬а <aside class="card summary">
┬а ┬а ┬а <h3 style="margin-top:0">р╕кр╕гр╕╕р╕Ыр╕Ър╕┤р╕е</h3>
┬а ┬а ┬а <div class="list">
┬а ┬а ┬а ┬а <div class="item"><span class="muted2">р╣Ар╕ер╕Вр╕Ър╕┤р╕е</span><span id="sum-bill">-</span></div>
┬а ┬а ┬а ┬а <div class="item"><span class="muted2">р╣Ар╕Бр╕б</span><span id="sum-game">-</span></div>
┬а ┬а ┬а ┬а <div class="item"><span class="muted2">р╣Ар╕Лр╕┤р╕гр╣Мр╕Яр╣Ар╕зр╕нр╕гр╣М</span><span id="sum-server">-</span></div>
┬а ┬а ┬а ┬а <div class="item"><span class="muted2">UID</span><span id="sum-uid">-</span></div>
┬а ┬а ┬а ┬а <div class="item"><span class="muted2">р╣Бр╕Юр╣Зр╕Бр╣Ар╕Бр╕И</span><span id="sum-pkg">-</span></div>
┬а ┬а ┬а ┬а <div class="item"><span class="muted2">р╕зр╕┤р╕Шр╕╡р╕Кр╕│р╕гр╕░</span><span id="sum-method">-</span></div>
┬а ┬а ┬а </div>
┬а ┬а ┬а <div style="height:1px;background:linear-gradient(90deg,transparent,rgba(255,255,255,.12),transparent);margin:10px 0"></div>
┬а ┬а ┬а <div class="item"><span class="muted2">р╕вр╕нр╕Фр╕кр╕╕р╕Чр╕Шр╕┤</span><span class="total" id="sum-total">р╕┐0</span></div>
┬а ┬а </aside>
┬а </section>

┬а ┬а <section id="pay" class="section" style="display:none">
┬а ┬а <div class="card">
┬а ┬а ┬а <h2 style="margin-top:0">р╕Кр╕│р╕гр╕░р╣Ар╕Зр╕┤р╕Щ</h2>
┬а ┬а ┬а <p class="muted2">р╣Ар╕ер╕╖р╕нр╕Бр╕Кр╣Ир╕нр╕Зр╕Чр╕▓р╕З тАв р╣Бр╕Щр╕Ър╕кр╕ер╕┤р╕Ы/р╣Ар╕ер╕Вр╕нр╣Йр╕▓р╕Зр╕нр╕┤р╕З тАв тАЬр╕Др╕▒р╕Фр╕ер╕нр╕Бр╕кр╕гр╕╕р╕Ыр╕Ър╕┤р╕етАЭ р╣Бр╕ер╣Йр╕з тАЬр╣Ар╕Ыр╕┤р╕Фр╣Бр╕Кр╕Чр╣Бр╕нр╕Фр╕бр╕┤р╕ЩтАЭ</p>
┬а ┬а ┬а <div class="grid pkg">
┬а ┬а ┬а ┬а <div class="glass" style="text-align:center">
┬а ┬а ┬а ┬а ┬а <div style="font-weight:800;margin-bottom:8px">TrueMoney Wallet</div>
┬а ┬а ┬а ┬а ┬а <img src="truemoney.png" alt="TrueMoney QR" style="border-radius:12px">
┬а ┬а ┬а ┬а ┬а <div class="muted2" style="margin-top:6px">р╕кр╣Бр╕Бр╕Щр╕Фр╣Йр╕зр╕вр╣Бр╕нр╕Ы TrueMoney</div>
┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а <div class="glass" style="text-align:center">
┬а ┬а ┬а ┬а ┬а <div style="font-weight:800;margin-bottom:8px">р╕Юр╕гр╣Йр╕нр╕бр╣Ар╕Юр╕вр╣М / р╕Шр╕Щр╕▓р╕Др╕▓р╕г</div>
┬а ┬а ┬а ┬а ┬а <img src="promptpay.png" alt="PromptPay QR" style="border-radius:12px">
┬а ┬а ┬а ┬а ┬а <div class="muted2" style="margin-top:6px">р╕кр╣Бр╕Бр╕Щр╕Фр╣Йр╕зр╕вр╣Бр╕нр╕Ыр╕Шр╕Щр╕▓р╕Др╕▓р╕г</div>
┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а </div>

┬а ┬а ┬а <div class="glass" style="margin-top:14px">
┬а ┬а ┬а ┬а <h3 style="margin-top:0">р╣Бр╕Щр╕Ър╕лр╕ер╕▒р╕Бр╕Рр╕▓р╕Щ</h3>
┬а ┬а ┬а ┬а <div class="row">
┬а ┬а ┬а ┬а ┬а <div>
┬а ┬а ┬а ┬а ┬а ┬а <label>р╕нр╕▒р╕Ыр╣Вр╕лр╕ер╕Фр╕кр╕ер╕┤р╕Ы</label>
┬а ┬а ┬а ┬а ┬а ┬а <input id="slip" type="file" accept="image/*">
┬а ┬а ┬а ┬а ┬а ┬а <div class="muted2" style="margin-top:6px">р╣Ар╕зр╣Зр╕Ър╕кр╣Бр╕Хр╕Хр╕┤р╕Бр╕Ир╕░р╣Др╕бр╣Ир╣Ар╕Бр╣Зр╕Ър╣Др╕Яр╕ер╣М р╣Гр╕лр╣Йр╣Бр╕Щр╕Ър╕Лр╣Йр╕│р╣Гр╕Щр╣Бр╕Кр╕Чр╕лр╕▓р╕Бр╕Хр╣Йр╕нр╕Зр╣Гр╕Кр╣Й</div>
┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а <div>
┬а ┬а ┬а ┬а ┬а ┬а <label>р╣Ар╕ер╕Вр╕нр╣Йр╕▓р╕Зр╕нр╕┤р╕З (р╕Цр╣Йр╕▓р╕бр╕╡)</label>
┬а ┬а ┬а ┬а ┬а ┬а <input id="ref" placeholder="р╣Ар╕Кр╣Ир╕Щ 2025-XX-XX">
┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а </div>

┬а ┬а ┬а ┬а <div class="tools" style="margin-top:12px">
┬а ┬а ┬а ┬а ┬а <button class="btn" id="btnBackToForm" type="button">р╕Бр╕ер╕▒р╕Ър╣Др╕Ыр╣Бр╕Бр╣Йр╕Яр╕нр╕гр╣Мр╕б</button>
┬а ┬а ┬а ┬а ┬а <button class="btn primary" id="btnPrepareMsg" type="button" disabled>р╕Др╕▒р╕Фр╕ер╕нр╕Бр╕кр╕гр╕╕р╕Ыр╕Ър╕┤р╕е</button>
┬а ┬а ┬а ┬а ┬а <a class="btn" id="btnOpenAdmin" href="#" target="_blank" rel="noopener" style="pointer-events:none;opacity:.6">р╣Ар╕Ыр╕┤р╕Фр╣Бр╕Кр╕Чр╣Бр╕нр╕Фр╕бр╕┤р╕Щ</a>
┬а ┬а ┬а ┬а </div>

┬а ┬а ┬а ┬а <div id="copyHint" class="muted2" style="display:none;margin-top:8px">┬ар╕Др╕▒р╕Фр╕ер╕нр╕Бр╣Бр╕ер╣Йр╕з р╕Цр╣Йр╕▓р╣Бр╕Кр╕Чр╣Др╕бр╣Ир╕Юр╕┤р╕бр╕Юр╣Мр╣Гр╕лр╣Йр╣Ар╕нр╕З р╣Гр╕лр╣Й тАЬр╕зр╕▓р╕З (Paste)тАЭ р╣Др╕Фр╣Йр╣Ар╕ер╕в</div>
┬а ┬а ┬а ┬а <textarea id="msgPreview" readonly style="display:none;width:100%;margin-top:8px;background:#0f1a13;color:#f8fff6;border:1px solid #203326;border-radius:10px;padding:10px" rows="8"></textarea>
┬а ┬а ┬а </div>
┬а ┬а </div>
┬а </section>

┬а ┬а <section id="history" class="section">
┬а ┬а <div class="card">
┬а ┬а ┬а <h2 style="margin:0">р╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤р╕Бр╕▓р╕гр╕Чр╕│р╕гр╕▓р╕вр╕Бр╕▓р╕г</h2>
┬а ┬а ┬а <div class="tools" style="margin:10px 0">
┬а ┬а ┬а ┬а <input id="histSearch" placeholder="р╕Др╣Йр╕Щр╕лр╕▓: р╕Ър╕┤р╕е/р╣Ар╕Бр╕б/UID/р╕Кр╕╖р╣Ир╕н" style="max-width:260px">
┬а ┬а ┬а ┬а <select id="histGameFilter" class="pill">
┬а ┬а ┬а ┬а ┬а <option value="">р╕Чр╕╕р╕Бр╣Ар╕Бр╕б</option>
┬а ┬а ┬а ┬а </select>
┬а ┬а ┬а ┬а <select id="histStatusFilter" class="pill">
┬а ┬а ┬а ┬а ┬а <option value="">р╕Чр╕╕р╕Бр╕кр╕Цр╕▓р╕Щр╕░</option>
┬а ┬а ┬а ┬а ┬а <option>р╕гр╕нр╕Кр╕│р╕гр╕░</option>
┬а ┬а ┬а ┬а ┬а <option>р╕кр╣Ир╕Зр╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╣Бр╕ер╣Йр╕з</option>
┬а ┬а ┬а ┬а ┬а <option>р╕Кр╕│р╕гр╕░р╣Бр╕ер╣Йр╕з</option>
┬а ┬а ┬а ┬а ┬а <option>р╕вр╕Бр╣Ар╕ер╕┤р╕Б</option>
┬а ┬а ┬а ┬а </select>
┬а ┬а ┬а ┬а <button class="btn" id="btnExportCsv">р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Ф CSV</button>
┬а ┬а ┬а ┬а <button class="btn" id="btnClearAll">р╕гр╕╡р╣Ар╕Лр╣Зр╕Хр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф</button>
┬а ┬а ┬а </div>

┬а ┬а ┬а <div class="glass table-scroll">
┬а ┬а ┬а ┬а <table id="histTable">
┬а ┬а ┬а ┬а ┬а <thead>
┬а ┬а ┬а ┬а ┬а ┬а <tr>
┬а ┬а ┬а ┬а ┬а ┬а ┬а <th>р╣Ар╕зр╕ер╕▓</th><th>р╣Ар╕ер╕Вр╕Ър╕┤р╕е</th><th>р╣Ар╕Бр╕б</th><th>р╣Ар╕Лр╕┤р╕гр╣Мр╕Я</th><th>р╣Бр╕Юр╣Зр╕Бр╣Ар╕Бр╕И</th><th>р╕вр╕нр╕Ф</th><th>р╕кр╕Цр╕▓р╕Щр╕░</th><th>UID</th><th>р╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕бр╕╖р╕н</th>
┬а ┬а ┬а ┬а ┬а ┬а </tr>
┬а ┬а ┬а ┬а ┬а </thead>
┬а ┬а ┬а ┬а ┬а <tbody></tbody>
┬а ┬а ┬а ┬а </table>
┬а ┬а ┬а ┬а <div id="histEmpty" class="muted2" style="padding:8px 0;display:none">р╕вр╕▒р╕Зр╣Др╕бр╣Ир╕бр╕╡р╕гр╕▓р╕вр╕Бр╕▓р╕г</div>
┬а ┬а ┬а </div>
┬а ┬а </div>
┬а </section>

┬а <div class="footer">┬й 2025 Evan Vale тАв Christmas Event</div>
</div>

<script>
/* ===== AUTH / SESSION ===== */
const KEY_USER="ev_auth_user";
const KEY_SESSION="ev_auth_session";
function ordersKey(){ const u=userBox(); return u? `ev_orders_${u.user}` : "ev_orders__guest"; }

async function sha256(str){
┬а const enc=new TextEncoder().encode(str);
┬а const buf=await crypto.subtle.digest('SHA-256',enc);
┬а return [...new Uint8Array(buf)].map(b=>b.toString(16).padStart(2,'0')).join('');
}
function userBox(){ try{ return JSON.parse(localStorage.getItem(KEY_USER)||"null"); }catch{return null;} }
function setUserBox(v){ localStorage.setItem(KEY_USER, JSON.stringify(v)); }
function setSession(on){ if(on){ sessionStorage.setItem(KEY_SESSION,"ok"); } else { sessionStorage.removeItem(KEY_SESSION); } }
function isLogged(){ return sessionStorage.getItem(KEY_SESSION)==="ok"; }
function showAuth(show){ document.getElementById('auth').classList.toggle('hide', !show); }
function toggleProtected(disabled){
┬а document.getElementById('btnSubmit').disabled ┬а ┬а ┬а= disabled;
┬а document.getElementById('btnPrepareMsg').disabled ┬а= disabled;
┬а document.getElementById('btnSaveProfile').disabled = disabled;
┬а document.getElementById('btnLogout').style.display = disabled ? "none" : "inline-block";
}

/* ===== DATA ===== */
const ADMIN_URL = "https://www.facebook.com/profile.php?id=61581815886305";
const GAMES = [
┬а { key:"Free Fire", icon:"", servers:["Thailand","SEA","Global","р╕нр╕╖р╣Ир╕Щр╣Ж"] },
┬а { key:"RoV", icon:"", servers:["Thailand","Vietnam","Taiwan","р╕нр╕╖р╣Ир╕Щр╣Ж"] },
┬а { key:"Genshin Impact", icon:"", servers:["р╣Ар╕нр╣Ар╕Кр╕╡р╕в (Asia)","р╕нр╣Ар╕бр╕гр╕┤р╕Бр╕▓ (America)","р╕вр╕╕р╣Вр╕гр╕Ы (Europe)","TW, HK, MO","р╕нр╕╖р╣Ир╕Щр╣Ж"] },
┬а { key:"Honkai: Star Rail", icon:"", servers:["р╣Ар╕нр╣Ар╕Кр╕╡р╕в (Asia)","р╕нр╣Ар╕бр╕гр╕┤р╕Бр╕▓ (America)","р╕вр╕╕р╣Вр╕гр╕Ы (Europe)","TW, HK, MO","р╕нр╕╖р╣Ир╕Щр╣Ж"] },
┬а { key:"PUBG Mobile", icon:"", servers:["Thailand","SEA","KRJP","Global","р╕нр╕╖р╣Ир╕Щр╣Ж"] },
┬а { key:"Roblox", icon:"", servers:["Thailand","Asia","USA","Global","р╕нр╕╖р╣Ир╕Щр╣Ж"] },
┬а { key:"Roblox (р╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕нр╣Вр╕Ыр╕гр╣Вр╕бр╕Кр╕▒р╣Ир╕Щ)", icon:"", servers:["Thailand","Asia","USA","Global","р╕нр╕╖р╣Ир╕Щр╣Ж"] },
┬а { key:"Call of Duty", icon:"", servers:["Thailand","SEA","Global","р╕нр╕╖р╣Ир╕Щр╣Ж"] },
┬а { key:"Wuthering Waves", icon:"", servers:["р╣Ар╕нр╣Ар╕Кр╕╡р╕в (Asia)","р╕нр╣Ар╕бр╕гр╕┤р╕Бр╕▓ (America)","р╕вр╕╕р╣Вр╕гр╕Ы (Europe)","TW, HK, MO","р╕нр╕╖р╣Ир╕Щр╣Ж"] },
];
const PACKS_BY_GAME = {
┬а "Free Fire":[{name:"33 р╣Ар╕Юр╕Кр╕г",price:11},{name:"68 р╣Ар╕Юр╕Кр╕г",price:21},{name:"172 р╣Ар╕Юр╕Кр╕г",price:49},{name:"310 р╣Ар╕Юр╕Кр╕г",price:87},{name:"517 р╣Ар╕Юр╕Кр╕г",price:145},{name:"690 р╣Ар╕Юр╕Кр╕г",price:195},{name:"1052 р╣Ар╕Юр╕Кр╕г",price:290},{name:"1800 р╣Ар╕Юр╕Кр╕г",price:480},{name:"3698 р╣Ар╕Юр╕Кр╕г",price:950},{name:"7396 р╣Ар╕Юр╕Кр╕г",price:1900},{name:"р╕гр╕▓р╕вр╕кр╕▒р╕Ыр╕Фр╕▓р╕лр╣Мр╕Фр╕▓р╕бр╕┤р╕Щр╕┤",price:32},{name:"р╕гр╕▓р╕вр╕кр╕▒р╕Ыр╕Фр╕▓р╕лр╣Мр╕Фр╕▓",price:63},{name:"р╕гр╕▓р╕вр╣Ар╕Фр╕╖р╕нр╕Щ",price:287},{name:"р╕Ър╕╣р╕вр╣Ир╕▓р╕лр╣Мр╕Юр╕▓р╕к",price:90},{name:"р╕нр╕╡р╣Вр╕зр╕Юр╕▓р╕к 3 р╕зр╕▒р╕Щ",price:46},{name:"р╕нр╕╡р╣Вр╕зр╕Юр╕▓р╕к 7 р╕зр╕▒р╕Щ",price:62},{name:"р╕нр╕╡р╣Вр╕зр╕Юр╕▓р╕к 30 р╕зр╕▒р╕Щ",price:220}],
┬а "RoV":[{name:"11 р╕Др╕╣р╕Ыр╕нр╕З",price:10},{name:"24 р╕Др╕╣р╕Ыр╕нр╕З",price:19},{name:"60 р╕Др╕╣р╕Ыр╕нр╕З",price:49},{name:"110 р╕Др╕╣р╕Ыр╕нр╕З",price:87},{name:"185 р╕Др╕╣р╕Ыр╕нр╕З",price:144},{name:"370 р╕Др╕╣р╕Ыр╕нр╕З",price:285},{name:"620 р╕Др╕╣р╕Ыр╕нр╕З",price:478},{name:"990 р╕Др╕╣р╕Ыр╕нр╕З",price:765},{name:"1250 р╕Др╕╣р╕Ыр╕нр╕З",price:960}],
┬а "Genshin Impact":[{name:"60 Genesis Crystals",price:30},{name:"300+30 Genesis Crystals",price:145},{name:"980+110 Genesis Crystals",price:420},{name:"1980+260 Genesis Crystals",price:870},{name:"3280+600 Genesis Crystals",price:1340},{name:"6480+1600 Genesis Crystals",price:2625},{name:"Blessing (р╕гр╕▓р╕вр╣Ар╕Фр╕╖р╕нр╕Щ)",price:179}],
┬а "Honkai: Star Rail":[{name:"60 Oneiric Shard",price:35},{name:"300+30 Shard",price:145},{name:"980+110 Shard",price:425},{name:"1980+260 Shard",price:870},{name:"3280+600 Shard",price:1340},{name:"6480+1600 Shard",price:2630},{name:"Express Supply Pass",price:145}],
┬а "PUBG Mobile":[{name:"60 UC",price:35},{name:"325 UC",price:179},{name:"660 UC",price:346},{name:"1800 UC",price:860},{name:"3850 UC",price:1696},{name:"8100 UC",price:3305},{name:"16200 UC",price:6475},{name:"24300 UC",price:9910}],
┬а "Roblox":[{name:"80 Robux",price:35},{name:"160 Robux",price:70},{name:"400 Robux",price:175},{name:"800 Robux",price:350},{name:"1000 Robux",price:400},{name:"2000 Robux",price:600},{name:"4000 Robux",price:1200},{name:"р╕гр╕▓р╕вр╣Ар╕Фр╕╖р╕нр╕Щ 1000 Robux",price:380}],
┬а "Roblox (р╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕нр╣Вр╕Ыр╕гр╣Вр╕бр╕Кр╕▒р╣Ир╕Щ)":[{name:"500 Robux (р╕Ир╕▓р╕Б 230 р╣Ар╕лр╕ер╕╖р╕н 160)",price:160},{name:"3000 Robux (р╕Ир╕▓р╕Б 1000 р╣Ар╕лр╕ер╕╖р╕н 860)",price:860}],
┬а "Call of Duty":[{name:"44 р╣Вр╕Ър╕Щр╕▒р╕к 10 CP",price:22},{name:"108 р╣Вр╕Ър╕Щр╕▒р╕к 30 CP",price:52},{name:"194 р╣Вр╕Ър╕Щр╕▒р╕к 55 CP",price:90},{name:"324 р╣Вр╕Ър╕Щр╕▒р╕к 90 CP",price:152},{name:"648 р╣Вр╕Ър╕Щр╕▒р╕к 216 CP",price:305},{name:"1080 р╣Вр╕Ър╕Щр╕▒р╕к 480 CP",price:505},{name:"2160 р╣Вр╕Ър╕Щр╕▒р╕к 1080 CP",price:1010}],
┬а "Wuthering Waves":[{name:"60 Lunite",price:35},{name:"300+30 Lunite",price:179},{name:"980+110 Lunite",price:549},{name:"Lunite Pass (р╕гр╕▓р╕вр╣Ар╕Фр╕╖р╕нр╕Щ)",price:179}]
};

/* ===== REFS ===== */
const tabs = document.getElementById('game-tabs');
const pkgGrid = document.getElementById('pkg-grid');
const selGame = document.getElementById('game');
const selServer = document.getElementById('server');
const selPackage = document.getElementById('package');
const miniSum = document.getElementById('miniSum');
const miniGame = document.getElementById('mini-game');
const miniServer = document.getElementById('mini-server');
const miniPkg = document.getElementById('mini-pkg');
const miniTotal = document.getElementById('mini-total');
const gameNote = document.getElementById('gameNote');
const thaiOnlyNote = document.getElementById('thaiOnlyNote');
const btnLogout = document.getElementById('btnLogout');

let currentGame = GAMES[0].key;
const thaiOnlyGames = ["Free Fire","RoV","PUBG Mobile","Roblox","Call of Duty"];

/* ===== UI: Packages ===== */
function renderGameTabs(){
┬а tabs.innerHTML = ""; selGame.innerHTML = "";
┬а GAMES.forEach(g=>{
┬а ┬а const t = document.createElement('div');
┬а ┬а t.className = 'tab' + (g.key===currentGame?' active':'');
┬а ┬а t.textContent = `${g.icon} ${g.key}`;
┬а ┬а t.addEventListener('click', ()=> setGame(g.key));
┬а ┬а tabs.appendChild(t);
┬а ┬а const opt = document.createElement('option');
┬а ┬а opt.value = g.key; opt.textContent = g.key;
┬а ┬а selGame.appendChild(opt);
┬а });
┬а selGame.value = currentGame;
}
function renderServers(){
┬а selServer.innerHTML = "";
┬а const gs = GAMES.find(x=>x.key===currentGame)?.servers || ["Global"];
┬а gs.forEach(s=>{
┬а ┬а const o=document.createElement('option'); o.value=s; o.textContent=s;
┬а ┬а selServer.appendChild(o);
┬а });
}
function renderPacks(){
┬а const packs = PACKS_BY_GAME[currentGame]||[];
┬а pkgGrid.innerHTML = "";
┬а selPackage.innerHTML = "<option value='' disabled selected>тАФ р╣Ар╕ер╕╖р╕нр╕Бр╣Бр╕Юр╣Зр╕Бр╣Ар╕Бр╕И тАФ</option>";
┬а packs.forEach(p=>{
┬а ┬а const card = document.createElement('div');
┬а ┬а card.className = "glass";
┬а ┬а card.innerHTML = `
┬а ┬а ┬а <div style="font-weight:800">${p.name}</div>
┬а ┬а ┬а <div class="price">р╕┐${p.price}</div>
┬а ┬а ┬а <div style="margin-top:10px">
┬а ┬а ┬а ┬а <a href="#order" class="btn primary" data-pkg="${p.name} тАУ р╕┐${p.price}">р╣Ар╕ер╕╖р╕нр╕Бр╣Бр╕Юр╣Зр╕Б</a>
┬а ┬а ┬а </div>`;
┬а ┬а pkgGrid.appendChild(card);
┬а ┬а const opt = document.createElement('option');
┬а ┬а opt.value = `${p.name} тАУ р╕┐${p.price}`;
┬а ┬а opt.textContent = `${p.name} тАУ р╕┐${p.price}`;
┬а ┬а selPackage.appendChild(opt);
┬а });
┬а pkgGrid.querySelectorAll('a[data-pkg]').forEach(a=>{
┬а ┬а a.addEventListener('click',e=>{
┬а ┬а ┬а e.preventDefault();
┬а ┬а ┬а selPackage.value = a.getAttribute('data-pkg');
┬а ┬а ┬а document.getElementById('order').scrollIntoView({behavior:'smooth'});
┬а ┬а ┬а updateSummary();
┬а ┬а });
┬а });
}
function setGame(game){
┬а currentGame = game;
┬а [...tabs.children].forEach(el=> el.classList.toggle('active', el.textContent.includes(game)));
┬а if (currentGame === "Roblox"){
┬а ┬а gameNote.style.display = "block"; gameNote.textContent = "┬аRoblox: р╣Гр╕Кр╣Йр╣Ар╕зр╕ер╕▓р╣Ар╕Хр╕┤р╕бр╕Щр╕▓р╕Щр╕Бр╕зр╣Ир╕▓р╣Ар╕Бр╕бр╕нр╕╖р╣Ир╕Щр╣Ар╕ер╣Зр╕Бр╕Щр╣Йр╕нр╕в (р╣Вр╕Ыр╕гр╕Фр╣Ар╕Ьр╕╖р╣Ир╕нр╣Ар╕зр╕ер╕▓)";
┬а } else if (currentGame === "Call of Duty"){
┬а ┬а gameNote.style.display = "block"; gameNote.textContent = "┬аCOD: р╕Цр╣Йр╕▓ ID р╕Ьр╕╣р╕Бр╕Бр╕▒р╕Ъ Garena р╕Ир╕░р╣Ар╕Хр╕┤р╕бр╣Др╕бр╣Ир╣Др╕Фр╣Й (р╕гр╕нр╕Зр╕гр╕▒р╕Ър╣Ар╕Йр╕Юр╕▓р╕░р╣Ар╕Лр╕┤р╕гр╣Мр╕Яр╣Др╕Чр╕в)";
┬а } else { gameNote.style.display="none"; gameNote.textContent=""; }
┬а thaiOnlyNote.style.display = thaiOnlyGames.includes(currentGame) ? "block" : "none";
┬а selGame.value = game;
┬а renderServers(); renderPacks(); updateSummary(); showMini();
}
function showMini(){
┬а const has = (selPackage.value||"").length>0 || (document.getElementById('uid').value||"").length>0;
┬а miniSum.style.display = has ? "block" : "none";
}

/* ===== SUMMARY / BILL ===== */
const pad = n => n.toString().padStart(2,'0');
function genInvoice(){
┬а const d = new Date();
┬а const ts = `${d.getFullYear()}${pad(d.getMonth()+1)}${pad(d.getDate())}-${pad(d.getHours())}${pad(d.getMinutes())}${pad(d.getSeconds())}`;
┬а const rnd = Math.floor(Math.random()*8999)+1000;
┬а return `EV-${ts}-${rnd}`;
}
function money(n){ return "р╕┐"+(n||0); }
function updateSummary(){
┬а const g = selGame.value;
┬а const s = selServer.value;
┬а const u = document.getElementById('uid').value || "-";
┬а const p = selPackage.value || "-";
┬а const m = document.getElementById('method').value;

┬а document.getElementById('sum-game').innerText ┬а = g;
┬а document.getElementById('sum-server').innerText = s || "-";
┬а document.getElementById('sum-uid').innerText ┬а ┬а= u;
┬а document.getElementById('sum-pkg').innerText ┬а ┬а= p;
┬а document.getElementById('sum-method').innerText = m;

┬а const price = Number((p.split("р╕┐")[1] || "0").replace(/[^\d]/g,""));
┬а const totalTxt = money(price);
┬а document.getElementById('sum-total').innerText = totalTxt;

┬а miniGame.textContent ┬а= g;
┬а miniServer.textContent= s || "-";
┬а miniPkg.textContent ┬а = p;
┬а miniTotal.textContent = totalTxt;

┬а showMini();
}
["game","server","uid","package","method","name","contact","promo"].forEach(id=>{
┬а const el = document.getElementById(id);
┬а el.addEventListener('input', updateSummary);
┬а el.addEventListener('change', updateSummary);
});

/* ===== HISTORY ===== */
function loadOrders(){ try{ return JSON.parse(localStorage.getItem(ordersKey())||"[]"); }catch{return [];} }
function saveOrders(list){ localStorage.setItem(ordersKey(), JSON.stringify(list)); }
function addOrder(row){ const list=loadOrders(); list.unshift(row); saveOrders(list); renderHistory(); }
function updateOrderStatus(inv, status){
┬а const list=loadOrders(); const idx=list.findIndex(x=>x.invoiceId===inv);
┬а if(idx>-1){ list[idx].status=status; saveOrders(list); renderHistory(); }
}
function deleteOrder(inv){
┬а const list=loadOrders().filter(x=>x.invoiceId!==inv);
┬а saveOrders(list); renderHistory();
}
function clearAll(){
┬а if(confirm('р╕ер╣Йр╕▓р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╕Вр╕нр╕Зр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╕Др╕Щр╕Щр╕╡р╣Й? (р╕гр╕зр╕бр╕Ър╕▒р╕Нр╕Кр╕╡/р╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤)')){
┬а ┬а localStorage.removeItem(KEY_USER);
┬а ┬а sessionStorage.removeItem(KEY_SESSION);
┬а ┬а localStorage.removeItem(ordersKey());
┬а ┬а location.reload();
┬а }
}
// render History
const histTableBody = document.querySelector('#histTable tbody');
const histEmpty = document.getElementById('histEmpty');
const histSearch = document.getElementById('histSearch');
const histGameFilter = document.getElementById('histGameFilter');
const histStatusFilter = document.getElementById('histStatusFilter');

function initHistoryFilters(){
┬а histGameFilter.innerHTML = '<option value="">р╕Чр╕╕р╕Бр╣Ар╕Бр╕б</option>' + GAMES.map(g=>`<option>${g.key}</option>`).join('');
┬а [histSearch,histGameFilter,histStatusFilter].forEach(el=>{
┬а ┬а el.addEventListener('input', renderHistory);
┬а ┬а el.addEventListener('change', renderHistory);
┬а });
}
function renderHistory(){
┬а const q = (histSearch.value||"").toLowerCase();
┬а const g = histGameFilter.value||"";
┬а const st= histStatusFilter.value||"";
┬а const list = loadOrders().filter(x=>{
┬а ┬а const inTxt = (x.invoiceId+x.game+x.uid+(x.name||"")+(x.package||"")).toLowerCase().includes(q);
┬а ┬а const gOk = g? x.game===g : true;
┬а ┬а const sOk = st? x.status===st : true;
┬а ┬а return inTxt && gOk && sOk;
┬а });
┬а histTableBody.innerHTML = "";
┬а histEmpty.style.display = list.length? "none":"block";
┬а list.forEach(x=>{
┬а ┬а const tr = document.createElement('tr');
┬а ┬а tr.innerHTML = `
┬а ┬а ┬а <td>${new Date(x.ts).toLocaleString()}</td>
┬а ┬а ┬а <td>${x.invoiceId}</td>
┬а ┬а ┬а <td>${x.game}</td>
┬а ┬а ┬а <td>${x.server||"-"}</td>
┬а ┬а ┬а <td>${x.package||"-"}</td>
┬а ┬а ┬а <td>${x.total||"р╕┐0"}</td>
┬а ┬а ┬а <td>
┬а ┬а ┬а ┬а <select data-inv="${x.invoiceId}">
┬а ┬а ┬а ┬а ┬а ${["р╕гр╕нр╕Кр╕│р╕гр╕░","р╕кр╣Ир╕Зр╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╣Бр╕ер╣Йр╕з","р╕Кр╕│р╕гр╕░р╣Бр╕ер╣Йр╕з","р╕вр╕Бр╣Ар╕ер╕┤р╕Б"].map(s=>`<option ${x.status===s?"selected":""}>${s}</option>`).join('')}
┬а ┬а ┬а ┬а </select>
┬а ┬а ┬а </td>
┬а ┬а ┬а <td>${x.uid||"-"}</td>
┬а ┬а ┬а <td>
┬а ┬а ┬а ┬а <button class="btn" data-view="${x.invoiceId}">р╕Фр╕╣</button>
┬а ┬а ┬а ┬а <button class="btn" data-del="${x.invoiceId}">р╕ер╕Ъ</button>
┬а ┬а ┬а </td>`;
┬а ┬а histTableBody.appendChild(tr);
┬а });
┬а histTableBody.querySelectorAll('button[data-del]').forEach(b=>{
┬а ┬а b.onclick = ()=> deleteOrder(b.getAttribute('data-del'));
┬а });
┬а histTableBody.querySelectorAll('button[data-view]').forEach(b=>{
┬а ┬а b.onclick = ()=>{
┬а ┬а ┬а const inv = b.getAttribute('data-view');
┬а ┬а ┬а const x = loadOrders().find(o=>o.invoiceId===inv);
┬а ┬а ┬а if(!x) return;
┬а ┬а ┬а alert(
`р╣Ар╕ер╕Вр╕Ър╕┤р╕е: ${x.invoiceId}
р╣Ар╕зр╕ер╕▓: ${new Date(x.ts).toLocaleString()}
р╣Ар╕Бр╕б: ${x.game}
р╣Ар╕Лр╕┤р╕гр╣Мр╕Яр╣Ар╕зр╕нр╕гр╣М: ${x.server||"-"}
р╣Бр╕Юр╣Зр╕Бр╣Ар╕Бр╕И: ${x.package||"-"}
р╕вр╕нр╕Ф: ${x.total||"р╕┐0"}
р╕зр╕┤р╕Шр╕╡р╕Кр╕│р╕гр╕░: ${x.method}
UID: ${x.uid||"-"}
р╕ер╕╣р╕Бр╕Др╣Йр╕▓: ${x.name||"-"} | р╕Хр╕┤р╕Фр╕Хр╣Ир╕н: ${x.contact||"-"}
р╕кр╕Цр╕▓р╕Щр╕░: ${x.status}`);
┬а ┬а };
┬а });
┬а histTableBody.querySelectorAll('select[data-inv]').forEach(s=>{
┬а ┬а s.onchange = ()=> updateOrderStatus(s.getAttribute('data-inv'), s.value);
┬а });
}

/* ===== MESSAGE / COPY ===== */
function buildMessage(){
┬а const g = selGame.value, s = selServer.value, u = document.getElementById('uid').value || "-";
┬а const p = selPackage.value || "-", m = document.getElementById('method').value;
┬а const name = document.getElementById('name').value || "-", contact = document.getElementById('contact').value || "-";
┬а const total = document.getElementById('sum-total').innerText || "р╕┐0";
┬а const ref = (document.getElementById('ref')?.value || "").trim();
┬а return `р╕нр╕нр╕гр╣Мр╣Ар╕Фр╕нр╕гр╣Мр╣Ар╕Хр╕┤р╕бр╣Ар╕Бр╕б Evan Vale
р╣Ар╕ер╕Вр╕Ър╕┤р╕е: ${window.invoiceId}
р╣Ар╕Бр╕б: ${g}
р╣Ар╕Лр╕┤р╕гр╣Мр╕Яр╣Ар╕зр╕нр╕гр╣М/р╣Вр╕Лр╕Щ: ${s || "-"}
UID/Player ID: ${u}
р╣Бр╕Юр╣Зр╕Бр╣Ар╕Бр╕И: ${p}
р╕зр╕┤р╕Шр╕╡р╕Кр╕│р╕гр╕░: ${m}
р╕вр╕нр╕Фр╕кр╕╕р╕Чр╕Шр╕┤: ${total}
р╕Кр╕╖р╣Ир╕нр╕ер╕╣р╕Бр╕Др╣Йр╕▓: ${name}
р╕Хр╕┤р╕Фр╕Хр╣Ир╕н: ${contact}
р╣Ар╕ер╕Вр╕нр╣Йр╕▓р╕Зр╕нр╕┤р╕З: ${ref||"-"}
р╣Вр╕Ыр╕гр╕Фр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕кр╕ер╕┤р╕Ыр╕Чр╕╡р╣Ир╣Бр╕Щр╕Ър╕Фр╣Йр╕зр╕вр╕Др╕гр╕▒р╕Ъ`;
}
const btnPrepare ┬а = document.getElementById('btnPrepareMsg');
const btnOpenAdmin = document.getElementById('btnOpenAdmin');
const msgPreview ┬а = document.getElementById('msgPreview');
const copyHint ┬а ┬а = document.getElementById('copyHint');
function makeAdminUrl(){ return ADMIN_URL; }
async function copyTextSafe(text){
┬а try{ await navigator.clipboard.writeText(text); return true; }
┬а catch{
┬а ┬а const ta = document.createElement('textarea'); ta.value = text; ta.style.position='fixed'; ta.style.opacity='0';
┬а ┬а document.body.appendChild(ta); ta.focus(); ta.select();
┬а ┬а let ok=false; try{ ok=document.execCommand('copy'); }catch{}
┬а ┬а document.body.removeChild(ta); return !!ok;
┬а }
}
btnPrepare?.addEventListener('click', async ()=>{
┬а if(!isLogged()){ alert('р╕Бр╕гр╕╕р╕Ур╕▓р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ър╕Бр╣Ир╕нр╕Щ'); return; }
┬а const msg = buildMessage();
┬а if (msgPreview){ msgPreview.value = msg; msgPreview.style.display = 'block'; }
┬а if (copyHint){ copyHint.style.display = 'block'; copyHint.textContent = 'р╕Бр╕│р╕ер╕▒р╕Зр╕Др╕▒р╕Фр╕ер╕нр╕Бр╕кр╕гр╕╕р╕Ыр╕Ър╕┤р╕е...'; }
┬а const copied = await copyTextSafe(msg);
┬а if (copyHint){
┬а ┬а copyHint.textContent = copied
┬а ┬а ┬а ? 'р╕Др╕▒р╕Фр╕ер╕нр╕Бр╕кр╕гр╕╕р╕Ыр╕Ър╕┤р╕ер╣Бр╕ер╣Йр╕з┬а┬ар╕Хр╣Ир╕нр╣Др╕Ыр╕Бр╕Ф "р╣Ар╕Ыр╕┤р╕Фр╣Бр╕Кр╕Чр╣Бр╕нр╕Фр╕бр╕┤р╕Щ" р╣Др╕Фр╣Йр╣Ар╕ер╕в'
┬а ┬а ┬а : 'р╕Др╕▒р╕Фр╕ер╕нр╕Бр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤р╣Др╕бр╣Ир╕кр╕│р╣Ар╕гр╣Зр╕И р╣Гр╕лр╣Йр╕Др╕▒р╕Фр╕ер╕нр╕Бр╕Ир╕▓р╕Бр╕Кр╣Ир╕нр╕Зр╕кр╕гр╕╕р╕Ыр╕Фр╣Йр╕▓р╕Щр╕Ър╕Щ р╣Бр╕ер╣Йр╕зр╕Др╣Ир╕нр╕вр╕Бр╕Ф "р╣Ар╕Ыр╕┤р╕Фр╣Бр╕Кр╕Чр╣Бр╕нр╕Фр╕бр╕┤р╕Щ"';
┬а }
┬а btnOpenAdmin.href = makeAdminUrl();
┬а btnOpenAdmin.style.pointerEvents = 'auto';
┬а btnOpenAdmin.style.opacity = '1';

┬а if(window.invoiceId){ updateOrderStatus(window.invoiceId, 'р╕кр╣Ир╕Зр╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╣Бр╕ер╣Йр╕з'); }
});
btnOpenAdmin?.addEventListener('click', (e)=>{
┬а if (!btnOpenAdmin.href || btnOpenAdmin.getAttribute('href') === '#'){
┬а ┬а e.preventDefault(); window.open(makeAdminUrl(), '_blank');
┬а }
});

/* ===== FORM ACTIONS ===== */
document.getElementById('btnReset')?.addEventListener('click', ()=>{
┬а document.querySelectorAll('#order input').forEach(i=>i.value="");
┬а selPackage.selectedIndex = 0; updateSummary();
});
window.invoiceId = "-";
document.getElementById('btnSubmit')?.addEventListener('click', ()=>{
┬а if(!isLogged()){ alert('р╕Бр╕гр╕╕р╕Ур╕▓р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ър╕Бр╣Ир╕нр╕Щ'); return; }
┬а window.invoiceId = genInvoice();
┬а document.getElementById('sum-bill').innerText = window.invoiceId;
┬а const pay = document.getElementById('pay'); pay.style.display = ""; pay.scrollIntoView({behavior:'smooth'});

┬а const row = {
┬а ┬а ts: Date.now(),
┬а ┬а invoiceId: window.invoiceId,
┬а ┬а game: selGame.value,
┬а ┬а server: selServer.value,
┬а ┬а package: selPackage.value,
┬а ┬а total: document.getElementById('sum-total').innerText,
┬а ┬а method: document.getElementById('method').value,
┬а ┬а uid: document.getElementById('uid').value.trim(),
┬а ┬а name: document.getElementById('name').value.trim(),
┬а ┬а contact: document.getElementById('contact').value.trim(),
┬а ┬а status: 'р╕гр╕нр╕Кр╕│р╕гр╕░'
┬а };
┬а addOrder(row);
});
document.getElementById('btnBackToForm')?.addEventListener('click', ()=>{
┬а document.getElementById('pay').style.display = "none";
┬а document.getElementById('order').scrollIntoView({behavior:'smooth'});
});

/* ===== PROFILE SAVE/FILL ===== */
function fillFromProfile(){
┬а const ub = userBox(); if(!ub) return;
┬а if(ub.name) ┬а ┬аdocument.getElementById('name').value =┬аub.name;
┬а if(ub.contact) document.getElementById('contact').value = ub.contact;
┬а if(ub.last){
┬а ┬а if(ub.last.game && GAMES.find(g=>g.key===ub.last.game)){ setGame(ub.last.game); }
┬а ┬а if(ub.last.server){ selServer.value = ub.last.server; }
┬а ┬а if(ub.last.package){ selPackage.value = ub.last.package; }
┬а ┬а if(ub.last.method){ document.getElementById('method').value = ub.last.method; }
┬а ┬а if(ub.last.uid){ document.getElementById('uid').value = ub.last.uid; }
┬а }
┬а updateSummary();
}
document.getElementById('btnSaveProfile')?.addEventListener('click', ()=>{
┬а const ub = userBox(); if(!ub){ alert('р╕Хр╣Йр╕нр╕Зр╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ър╕Бр╣Ир╕нр╕Щ'); return; }
┬а┬аub.name┬а= document.getElementById('name').value.trim();
┬а ub.contact = document.getElementById('contact').value.trim();
┬а ub.last = {
┬а ┬а game: selGame.value, server: selServer.value, package: selPackage.value,
┬а ┬а method: document.getElementById('method').value, uid: document.getElementById('uid').value.trim()
┬а };
┬а setUserBox(ub);
┬а alert('р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕ер╕╣р╕Бр╕Др╣Йр╕▓р╣Др╕зр╣Йр╣Гр╕Щр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╣Бр╕ер╣Йр╕з┬а');
});

/* ===== AUTH FLOW ===== */
function renderAuth(){
┬а const ub = userBox(); const hasUser = !!ub;
┬а document.getElementById('authTitle').textContent = hasUser? '┬ар╣Ар╕Вр╣Йр╕▓р╕гр╕░р╕Ър╕Ъ' : '┬ар╕кр╕гр╣Йр╕▓р╕Зр╕Ър╕▒р╕Нр╕Кр╕╡р╕Др╕гр╕▒р╣Йр╕Зр╣Бр╕гр╕Б';
┬а document.getElementById('authDesc').textContent = hasUser? 'р╣Гр╕кр╣Ир╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╣Бр╕ер╕░ PIN р╣Ар╕Юр╕╖р╣Ир╕нр╣Ар╕Вр╣Йр╕▓р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ' : 'р╕Хр╕▒р╣Йр╕Зр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й + PIN р╣Бр╕ер╕░р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╣Вр╕Ыр╕гр╣Др╕Яр╕ер╣М (р╕Цр╣Йр╕▓р╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕г)';
┬а document.getElementById('setupForm').style.display = hasUser? 'none' : 'block';
┬а document.getElementById('loginForm').style.display = hasUser? 'block' : 'none';
}
async function tryAutoLogin(){
┬а if(isLogged()){ showAuth(false); toggleProtected(false); fillFromProfile(); renderHistory(); return; }
┬а renderAuth(); showAuth(true); toggleProtected(true);
}
document.getElementById('btnSetup').addEventListener('click', async ()=>{
┬а const user = document.getElementById('setupUser').value.trim();
┬а const p1 = document.getElementById('setupPin').value.trim();
┬а const p2 = document.getElementById('setupPin2').value.trim();
┬а if(!user || p1.length<4 || p1!==p2){ alert('р╕Хр╕гр╕зр╕Ир╕Кр╕╖р╣Ир╕нр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й р╣Бр╕ер╕░ PIN (р╕нр╕вр╣Ир╕▓р╕Зр╕Щр╣Йр╕нр╕в 4 р╕лр╕ер╕▒р╕Б р╣Бр╕ер╕░р╕Хр╣Йр╕нр╕Зр╕Хр╕гр╕Зр╕Бр╕▒р╕Щ)'); return; }
┬а const name = document.getElementById('setupName').value.trim();
┬а const contact = document.getElementById('setupContact').value.trim();
┬а const pinHash = await sha256(user+'|'+p1);
┬а setUserBox({user, pinHash, name, contact});
┬а setSession(true); showAuth(false); toggleProtected(false); fillFromProfile(); initHistoryFilters(); renderHistory();
});
document.getElementById('btnLogin').addEventListener('click', async ()=>{
┬а const user = document.getElementById('loginUser').value.trim();
┬а const pin = document.getElementById('loginPin').value.trim();
┬а const ub = userBox(); if(!ub){ alert('р╕вр╕▒р╕Зр╣Др╕бр╣Ир╕бр╕╡р╕Ър╕▒р╕Нр╕Кр╕╡ р╣Гр╕лр╣Йр╕Хр╕▒р╣Йр╕Зр╕Ър╕▒р╕Нр╕Кр╕╡р╕Бр╣Ир╕нр╕Щ'); return; }
┬а const hash = await sha256(user+'|'+pin);
┬а if(hash===ub.pinHash){ setSession(true); showAuth(false); toggleProtected(false); fillFromProfile(); initHistoryFilters(); renderHistory(); }
┬а else alert('р╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╕лр╕гр╕╖р╕н PIN р╣Др╕бр╣Ир╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З');
});
document.getElementById('btnForgot').addEventListener('click', ()=>{
┬а alert('р╕ер╕╖р╕б PIN: р╣Гр╕Кр╣Йр╕Ыр╕╕р╣Ир╕б тАЬр╕гр╕╡р╣Ар╕Лр╣Зр╕Хр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕ФтАЭ (р╕лр╕Щр╣Йр╕▓ р╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤) р╣Ар╕Юр╕╖р╣Ир╕нр╕ер╣Йр╕▓р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ър╕Щр╣Ар╕Др╕гр╕╖р╣Ир╕нр╕З р╣Бр╕ер╣Йр╕зр╕Хр╕▒р╣Йр╕Зр╣Гр╕лр╕бр╣И');
});
document.getElementById('btnLogout').addEventListener('click', ()=>{
┬а setSession(false); showAuth(true); toggleProtected(true);
});

/* ===== INIT ===== */
renderGameTabs(); setGame(currentGame); updateSummary(); initHistoryFilters(); tryAutoLogin();
</script>
</body>
</html>
