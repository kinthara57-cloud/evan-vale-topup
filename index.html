<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>EVAN VALE ‚Äî ‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏Å‡∏° | ‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß ‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÉ‡∏™ ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢</title>
<meta name="description" content="‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏Å‡∏° EVAN VALE ‚Äî ‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏Å‡∏°‡πÄ‡∏£‡πá‡∏ß ‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÉ‡∏™ ‡πÅ‡∏ô‡∏ö‡∏™‡∏•‡∏¥‡∏õ‡πÅ‡∏•‡πâ‡∏ß‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡πà‡∏á‡∏´‡∏≤‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö PromptPay/TrueMoney/‡πÇ‡∏≠‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£" />
<style>
:root{
  --bg:#070b12; --bg2:#0b1220; --panel:#0f1624; --card:#10192b;
  --text:#eaf1ff; --muted:#96a3ba; --brand:#58a8ff; --brand2:#9ef0ff; --warn:#ffd166;
  --border:#223048; --shadow:0 18px 50px rgba(0,0,0,.45); --r:16px;
}
*{box-sizing:border-box} html,body{height:100%} body{
  margin:0;color:var(--text);font-family:system-ui,Segoe UI,Prompt,sans-serif;
  background:
    radial-gradient(1200px 600px at -10% -10%, #15203a 0%, transparent 60%),
    radial-gradient(1000px 800px at 110% -10%, #142b45 0%, transparent 60%),
    radial-gradient(900px 900px at 50% 120%, #102037 0%, transparent 60%),
    linear-gradient(180deg, var(--bg), var(--bg2));
}
a{color:var(--brand2);text-decoration:none}
.wrap{max-width:1200px;margin:auto;padding:16px}
.nav{
  display:flex;gap:12px;justify-content:space-between;align-items:center;
  padding:10px 14px;border:1px solid var(--border);border-radius:18px;
  background:linear-gradient(180deg,#0b1424,#0a1020);box-shadow:var(--shadow)
}
.brand{display:flex;gap:10px;align-items:center}
.logo{width:42px;height:42px;border-radius:12px;background:conic-gradient(from 220deg,#58a8ff,#7df9ff,#6ee7ff,#58a8ff);display:grid;place-items:center;font-weight:900;color:#001627}
.btn{padding:8px 12px;border-radius:10px;border:1px solid var(--border);background:#0e1627;color:#dbe9ff}
.btn.primary{background:linear-gradient(90deg,var(--brand),var(--brand2));color:#00121e;border:none;box-shadow:0 6px 18px rgba(100,200,255,.35)}
.layout{display:grid;grid-template-columns:260px 1fr;gap:16px;margin-top:16px}
.side{background:var(--panel);border:1px solid var(--border);border-radius:var(--r);padding:14px}
.main{display:grid;gap:16px}
.card{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:14px;box-shadow:var(--shadow)}
.badge{padding:6px 10px;border-radius:999px;background:#0f1a2d;border:1px solid var(--border);display:inline-block}
.notice{background:#0e1528;border:1px solid rgba(255,255,255,.08);border-left:3px solid var(--warn);border-radius:12px;padding:10px}
.grid{display:grid;gap:14px}
.products{grid-template-columns:repeat(auto-fill,minmax(180px,1fr))}
.prod{display:flex;flex-direction:column;gap:8px;border:1px solid var(--border);background:#0f1729;border-radius:14px;padding:10px}
.prod img{width:100%;aspect-ratio:1.6/1;border-radius:10px;object-fit:cover;background:#0b1420}
.price{font-weight:900}
.cat{display:flex;flex-direction:column;gap:8px}
.cat .item{display:flex;justify-content:space-between;align-items:center}
.search{display:flex;gap:8px}
input,select,textarea{width:100%;background:#0a111f;border:1px solid var(--border);color:var(--text);padding:10px;border-radius:10px}
hr.sep{border:none;height:1px;background:linear-gradient(90deg,transparent,rgba(255,255,255,.12),transparent);margin:12px 0}
.flex{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.right{margin-left:auto}
.tag{padding:4px 8px;border-radius:999px;background:#0e1627;border:1px solid var(--border);font-size:12px;color:#9db0c9}
.center{display:grid;place-items:center}
.footer{margin:28px 0 12px;color:#9db0c9;text-align:center}
@media (max-width:980px){.layout{grid-template-columns:1fr}}
/* cart drawer */
.drawer{position:fixed;right:16px;bottom:16px;z-index:50}
.cart-btn{position:relative}
.cart-count{position:absolute;top:-8px;right:-8px;background:#ff4d6d;color:#fff;border-radius:999px;padding:2px 6px;font-size:12px}
.cart{display:none;position:fixed;right:16px;bottom:64px;width:320px;background:#0f1729;border:1px solid var(--border);border-radius:14px;box-shadow:var(--shadow);padding:12px;z-index:60}
.cart .row{display:flex;justify-content:space-between;gap:8px;padding:6px 0;border-bottom:1px dashed rgba(255,255,255,.08)}
.cart .row:last-child{border-bottom:0}
/* loader */
.loader-overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.45);backdrop-filter:blur(3px);z-index:9999}
.loader-box{background:#0c1424;border:1px solid var(--border);border-radius:16px;padding:18px 22px;display:flex;gap:12px;align-items:center;box-shadow:var(--shadow)}
.spin{width:22px;height:22px;border-radius:999px;border:3px solid rgba(255,255,255,.15);border-top-color:#58a8ff;animation:spin .9s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}
</style>
</head>
<body>
<div class="wrap">
  <nav class="nav">
    <div class="brand">
      <div class="logo">EV</div>
      <div>
        <div style="font-weight:900;letter-spacing:.5px">EVAN VALE</div>
        <small style="color:#96a3ba">‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏Å‡∏° ‚Ä¢ ‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß ‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÉ‡∏™ ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢</small>
      </div>
    </div>
    <div class="flex">
      <a class="btn" href="#pay">‡∏ß‡∏¥‡∏ò‡∏µ‡∏ä‡∏≥‡∏£‡∏∞</a>
      <button id="btnLogin" class="btn">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
      <a class="btn primary" href="https://www.facebook.com/share/172YddmwsY/" target="_blank" rel="noopener">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô</a>
      <div class="drawer">
        <button id="btnCart" class="btn cart-btn">‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤ <span id="cartCount" class="cart-count">0</span></button>
      </div>
    </div>
  </nav>

  <div class="layout">
    <!-- SIDEBAR -->
    <aside class="side">
      <div class="badge">‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏£‡πâ‡∏≤‡∏ô</div>
      <div class="notice" style="margin-top:8px">
        üîí ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö ‚Ä¢ üì± ‡∏™‡πÅ‡∏Å‡∏ô‡∏Ñ‡∏¥‡∏ß‡∏≠‡∏≤‡∏£‡πå‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡∏≥‡∏£‡∏∞ ‚Ä¢ üìé ‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡πÅ‡∏ô‡∏ö‡∏™‡∏•‡∏¥‡∏õ‡∏´‡∏•‡∏±‡∏á‡πÇ‡∏≠‡∏ô
      </div>
      <hr class="sep">
      <div class="cat">
        <div class="item"><b>‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</b><span class="tag" id="countAll">0 ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</span></div>
        <button class="btn" data-cat="‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
        <button class="btn" data-cat="Free Fire">Free Fire</button>
        <button class="btn" data-cat="RoV">RoV</button>
        <button class="btn" data-cat="Genshin">Genshin</button>
        <button class="btn" data-cat="Honkai">Honkai</button>
        <button class="btn" data-cat="PUBG">PUBG</button>
        <button class="btn" data-cat="Roblox">Roblox</button>
      </div>
      <hr class="sep">
      <div class="search">
        <input id="q" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ / ‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ ‚Äò‡πÄ‡∏û‡∏ä‡∏£‚Äô, ‚ÄòUC‚Äô, ‚ÄòRobux‚Äô...">
        <button id="btnSearch" class="btn">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
      </div>
      <p id="thaiOnly" style="display:none;margin-top:10px;color:#ffd166">‚ö†Ô∏è ‡∏´‡∏°‡∏ß‡∏î‡∏ô‡∏µ‡πâ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÑ‡∏ó‡∏¢</p>
    </aside>

    <!-- MAIN -->
    <main class="main">
      <section class="card">
        <div class="flex">
          <div>
            <div class="badge">‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</div>
            <h2 style="margin:6px 0 0">‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏Å‡∏°‡∏Ç‡∏≠‡∏á <span style="color:var(--brand2)">EVAN VALE</span></h2>
            <p style="color:#96a3ba;margin:6px 0 0">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏°‡∏ß‡∏î ‚Üí ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏û‡πá‡∏Å ‚Üí <b>‡πÉ‡∏™‡πà‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</b> ‚Üí ‡πÑ‡∏õ‡∏ä‡∏≥‡∏£‡∏∞ ‚Üí ‡πÅ‡∏ô‡∏ö‡∏™‡∏•‡∏¥‡∏õ ‚Üí ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏£‡∏∏‡∏õ‡∏ö‡∏¥‡∏•‡∏™‡πà‡∏á‡∏´‡∏≤‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÉ‡∏´‡πâ</p>
          </div>
          <div class="right"><span class="tag">‡πÑ‡∏°‡πà‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô</span> <span class="tag">‡∏Ñ‡∏¥‡∏ß‡∏≠‡∏≤‡∏£‡πå‡∏ä‡∏≥‡∏£‡∏∞</span> <span class="tag">‡πÅ‡∏ô‡∏ö‡∏™‡∏•‡∏¥‡∏õ</span></div>
        </div>
      </section>

      <section class="grid products" id="list"></section>

      <section id="pay" class="card">
        <h3 style="margin:0 0 8px">‡∏ß‡∏¥‡∏ò‡∏µ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</h3>
        <p class="notice">‡∏™‡πÅ‡∏Å‡∏ô‡∏Ñ‡∏¥‡∏ß‡∏≠‡∏≤‡∏£‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡∏≥‡∏£‡∏∞ (‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 1 ‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á) ‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏ô‡∏ö‡∏™‡∏•‡∏¥‡∏õ/‡πÄ‡∏•‡∏Ç‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡πÉ‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô ‚Äú‡∏™‡πà‡∏á‡∏´‡∏≤‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‚Äù</p>
        <div class="grid" style="grid-template-columns:repeat(auto-fit,minmax(220px,1fr))">
          <div class="card center">
            <b>TrueMoney Wallet</b>
            <img src="truemoney.png" alt="TrueMoney QR" style="width:100%;border-radius:10px;margin-top:8px">
          </div>
          <div class="card center">
            <b>‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏û‡∏¢‡πå / ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£</b>
            <img src="promptpay.png" alt="PromptPay QR" style="width:100%;border-radius:10px;margin-top:8px">
          </div>
        </div>
      </section>

      <section class="card" id="checkout">
        <h3 style="margin:0 0 8px">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h3>
        <div class="grid" style="grid-template-columns:2fr 1fr">
          <div class="card" style="background:#0f1729">
            <div class="grid" style="grid-template-columns:1fr 1fr;gap:10px">
              <div>
                <label>‡πÄ‡∏Å‡∏° / ‡∏´‡∏°‡∏ß‡∏î</label>
                <input id="fGame" placeholder="‡∏à‡∏∞‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤" readonly>
              </div>
              <div>
                <label>UID / Player ID</label>
                <input id="fUid" placeholder="‡πÄ‡∏ä‡πà‡∏ô 812345678 ‡∏´‡∏£‡∏∑‡∏≠‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏ô‡πÄ‡∏Å‡∏°">
              </div>
              <div>
                <label>‡∏ß‡∏¥‡∏ò‡∏µ‡∏ä‡∏≥‡∏£‡∏∞</label>
                <select id="fMethod">
                  <option>PromptPay</option>
                  <option>TrueMoney Wallet</option>
                  <option>‡πÇ‡∏≠‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£</option>
                </select>
              </div>
              <div>
                <label>‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠</label>
                <input id="fContact" placeholder="Line/FB/Tel">
              </div>
              <div style="grid-column:1/3">
                <label>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)</label>
                <input id="fNote" placeholder="‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å/‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏û‡∏¥‡πÄ‡∏®‡∏©">
              </div>
              <div style="grid-column:1/3">
                <label>‡πÅ‡∏ô‡∏ö‡∏™‡∏•‡∏¥‡∏õ (‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ö‡∏ô‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå)</label>
                <input id="fSlip" type="file" accept="image/*">
              </div>
            </div>
          </div>
          <aside class="card">
            <div class="flex"><b>‡∏™‡∏£‡∏∏‡∏õ‡∏ö‡∏¥‡∏•</b><span class="right tag" id="sumCount">0 ‡∏ä‡∏¥‡πâ‡∏ô</span></div>
            <hr class="sep">
            <div id="sumList" style="display:flex;flex-direction:column;gap:6px"></div>
            <hr class="sep">
            <div class="flex"><span>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°</span><b id="sumTotal">‡∏ø0</b></div>
            <button id="btnCreate" class="btn primary" style="margin-top:10px;width:100%">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏¥‡∏•</button>
          </aside>
        </div>
      </section>

      <div class="footer">¬© 2025 EVAN VALE ‚Ä¢ ‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏Å‡∏°‡∏£‡∏≤‡∏Ñ‡∏≤‡∏î‡∏µ ‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÉ‡∏™ ‡∏°‡∏µ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏î‡∏π‡πÅ‡∏•</div>
    </main>
  </div>
</div>

<!-- CART DROPDOWN -->
<div id="cartBox" class="cart">
  <div style="display:flex;justify-content:space-between;align-items:center">
    <b>‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</b>
    <button id="btnClear" class="btn">‡∏•‡πâ‡∏≤‡∏á</button>
  </div>
  <hr class="sep">
  <div id="cartList"></div>
  <hr class="sep">
  <div class="flex"><span>‡∏£‡∏ß‡∏°</span><b id="cartTotal">‡∏ø0</b></div>
  <button id="btnToCheckout" class="btn primary" style="width:100%;margin-top:8px">‡πÑ‡∏õ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>
</div>

<!-- LOADER -->
<div id="loader" class="loader-overlay">
  <div class="loader-box"><div class="spin"></div><div>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏ß‡∏°‡∏¢‡∏≠‡∏î‚Ä¶</div></div>
</div>

<script>
// ========== CONFIG ==========
const ADMIN_URL = "https://www.facebook.com/share/172YddmwsY/"; // ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÄ‡∏û‡∏à
// ‡∏õ‡πâ‡∏≤‡∏¢‡∏ß‡πà‡∏≤‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÑ‡∏ó‡∏¢‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ö‡∏≤‡∏á‡∏´‡∏°‡∏ß‡∏î
const THAI_ONLY = ["Free Fire","RoV","PUBG","Roblox"];

// ========== MOCK PRODUCTS (‡πÅ‡∏Å‡πâ/‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏î‡πâ) ==========
const PRODUCTS = [
  // ‡∏´‡∏°‡∏ß‡∏î Free Fire
  {id:"ff-33",  cat:"Free Fire", name:"33 ‡πÄ‡∏û‡∏ä‡∏£",  price:11,  img:"https://picsum.photos/seed/ff33/480/300"},
  {id:"ff-172", cat:"Free Fire", name:"172 ‡πÄ‡∏û‡∏ä‡∏£", price:49,  img:"https://picsum.photos/seed/ff172/480/300"},
  {id:"ff-517", cat:"Free Fire", name:"517 ‡πÄ‡∏û‡∏ä‡∏£", price:145, img:"https://picsum.photos/seed/ff517/480/300"},
  {id:"ff-week-mini", cat:"Free Fire", name:"‡∏£‡∏≤‡∏¢‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå ‡∏î‡∏≤‡∏°‡∏¥‡∏ô‡∏¥", price:32, img:"https://picsum.photos/seed/ffwm/480/300"},
  // RoV
  {id:"rov-230", cat:"RoV", name:"230 ‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á", price:119, img:"https://picsum.photos/seed/rov230/480/300"},
  {id:"rov-470", cat:"RoV", name:"470 ‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á", price:229, img:"https://picsum.photos/seed/rov470/480/300"},
  // Genshin
  {id:"gi-60",  cat:"Genshin", name:"60 Genesis Crystals", price:35, img:"https://picsum.photos/seed/gi60/480/300"},
  {id:"gi-300", cat:"Genshin", name:"300+30 Crystals",     price:179,img:"https://picsum.photos/seed/gi300/480/300"},
  // Honkai
  {id:"hsr-60", cat:"Honkai", name:"60 Oneiric Shard", price:35, img:"https://picsum.photos/seed/hsr60/480/300"},
  // PUBG
  {id:"pubg-325",cat:"PUBG", name:"325 UC", price:179, img:"https://picsum.photos/seed/pubg325/480/300"},
  // Roblox
  {id:"rbx-400",cat:"Roblox", name:"400 Robux", price:179, img:"https://picsum.photos/seed/roblox400/480/300"},
];

// ========== STATE ==========
let user = JSON.parse(localStorage.getItem('ev_user')||'null');
let cart = JSON.parse(localStorage.getItem('ev_cart')||'[]');

// ========== HELPERS ==========
const $ = sel => document.querySelector(sel);
const $$ = sel => Array.from(document.querySelectorAll(sel));
const money = n => "‡∏ø"+(n||0).toLocaleString();
const setLoader = (on, text="‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏ß‡∏°‡∏¢‡∏≠‡∏î‚Ä¶")=>{
  const box = $('#loader'); box.querySelector('.loader-box div:last-child').textContent=text;
  box.style.display = on ? 'flex' : 'none';
};
const saveCart = ()=> localStorage.setItem('ev_cart', JSON.stringify(cart));

// ========== RENDER PRODUCTS ==========
const list = $('#list'), countAll = $('#countAll'), thaiOnly = $('#thaiOnly');
function renderProducts(cat="‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î", q=""){
  const items = PRODUCTS.filter(p=>{
    const byCat = (cat==="‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î" ? true : p.cat===cat);
    const byQ = q.trim()? (p.name+ ' '+p.cat).toLowerCase().includes(q.toLowerCase()) : true;
    return byCat && byQ;
  });
  countAll.textContent = ${items.length} ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤;
  thaiOnly.style.display = THAI_ONLY.includes(cat) ? 'block' : 'none';
  list.innerHTML = "";
  items.forEach(p=>{
    const el = document.createElement('div');
    el.className = "prod";
    el.innerHTML = `
      <img src="${p.img}" alt="${p.name}">
      <div style="display:flex;justify-content:space-between;gap:6px;align-items:center">
        <div>
          <div style="font-weight:800">${p.name}</div>
          <small style="color:#96a3ba">${p.cat}</small>
        </div>
        <div class="price">${money(p.price)}</div>
      </div>
      <button class="btn primary" data-add="${p.id}">‡πÉ‡∏™‡πà‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</button>
    `;
    list.appendChild(el);
  });
  // bind add
  $$('[data-add]').forEach(b=>{
    b.onclick = ()=>{
      const id = b.getAttribute('data-add');
      const prod = PRODUCTS.find(x=>x.id===id);
      const inx = cart.findIndex(x=>x.id===id);
      if(inx>-1) cart[inx].qty += 1; else cart.push({...prod, qty:1});
      saveCart(); renderCart();
    };
  });
}
renderProducts();

// ========== CATEGORY & SEARCH ==========
$$('.cat .btn').forEach(btn=>{
  btn.onclick = ()=>{
    $$('.cat .btn').forEach(x=>x.classList.remove('primary'));
    btn.classList.add('primary');
    renderProducts(btn.dataset.cat || "‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î", $('#q').value);
  };
});
$('#btnSearch').onclick = ()=> renderProducts(($('.cat .btn.primary')?.dataset.cat)||"‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î", $('#q').value);

// ========== CART ==========
const cartBox = $('#cartBox'), cartCount = $('#cartCount'), cartList = $('#cartList'), cartTotal = $('#cartTotal');
function renderCart(){
  cartCount.textContent = cart.reduce((a,b)=>a+b.qty,0);
  cartList.innerHTML = "";
  let sum = 0;
  cart.forEach(item=>{
    sum += item.price*item.qty;
    const row = document.createElement('div');
    row.className = "row";
    row.innerHTML = `
      <div style="flex:1">
        <div style="font-weight:700">${item.name}</div>
        <small style="color:#96a3ba">${item.cat}</small>
      </div>
      <div class="flex">
        <button class="btn" data-dec="${item.id}">-</button>
        <span>${item.qty}</span>
        <button class="btn" data-inc="${item.id}">+</button>
        <b>${money(item.price*item.qty)}</b>
        <button class="btn" data-del="${item.id}">‡∏•‡∏ö</button>
      </div>
    `;
    cartList.appendChild(row);
  });
  cartTotal.textContent = money(sum);
  $('#sumTotal').textContent = money(sum);
  $('#sumCount').textContent = ${cart.reduce((a,b)=>a+b.qty,0)} ‡∏ä‡∏¥‡πâ‡∏ô;
  $('#fGame').value = cart[0]?.cat || "";
  // bind
  $$('[data-inc]').forEach(b=> b.onclick = ()=>{ const id=b.dataset.inc; const i=cart.findIndex(x=>x.id===id); cart[i].qty++; saveCart(); renderCart(); });
  $$('[data-dec]').forEach(b=> b.onclick = ()=>{ const id=b.dataset.dec; const i=cart.findIndex(x=>x.id===id); cart[i].qty=Math.max(1,cart[i].qty-1); saveCart(); renderCart(); });
  $$('[data-del]').forEach(b=> b.onclick = ()=>{ const id=b.dataset.del; cart=cart.filter(x=>x.id!==id); saveCart(); renderCart(); });
}
renderCart();

$('#btnCart').onclick = ()=> cartBox.style.display = cartBox.style.display==='block' ? 'none' : 'block';
$('#btnClear').onclick = ()=>{ cart=[]; saveCart(); renderCart(); };
$('#btnToCheckout').onclick = ()=> document.getElementById('checkout').scrollIntoView({behavior:'smooth'});

// ========== LOGIN (‡∏à‡∏≥‡∏•‡∏≠‡∏á) ==========
$('#btnLogin').onclick = ()=>{
  if(user){ // logout
    if(confirm('‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö?')){ user=null; localStorage.removeItem('ev_user'); $('#btnLogin').textContent='‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö'; alert('‡∏≠‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß'); }
  }else{
    const name = prompt('‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (‡∏≠‡∏∞‡πÑ‡∏£‡∏Å‡πá‡πÑ‡∏î‡πâ):','guest');
    if(name){ user={name}; localStorage.setItem('ev_user', JSON.stringify(user)); $('#btnLogin').textContent='‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö'; alert('‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö '+name); }
  }
};
if(user) $('#btnLogin').textContent='‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö';

// ========== CREATE BILL & SEND ==========
function genInvoice(){
  const d=new Date(), pad=n=>n.toString().padStart(2,'0');
  const ts = ${d.getFullYear()}${pad(d.getMonth()+1)}${pad(d.getDate())}-${pad(d.getHours())}${pad(d.getMinutes())}${pad(d.getSeconds())};
  const rnd = Math.floor(Math.random()*8999)+1000;
  return EV-${ts}-${rnd};
}
$('#btnCreate').onclick = async ()=>{
  if(cart.length===0){ alert('‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤'); return; }
  if(!$('#fUid').value.trim()){ alert('‡∏Å‡∏£‡∏≠‡∏Å UID/Player ID ‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡∏∞'); return; }

  setLoader(true, "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏¥‡∏•‚Ä¶");
  setTimeout(async ()=>{
    const invoice = genInvoice();
    const items = cart.map(x=>`‚Ä¢ ${x.name} x${x.qty} = ${money(x.price*x.qty)}`).join('\n');
    const sum = cart.reduce((a,b)=>a+b.price*b.qty,0);
    const msg =
`‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏Å‡∏° EVAN VALE
‡πÄ‡∏•‡∏Ç‡∏ö‡∏¥‡∏•: ${invoice}
‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: ${user?.name||'-'}
‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠: ${$('#fContact').value||'-'}
‡πÄ‡∏Å‡∏°/‡∏´‡∏°‡∏ß‡∏î: ${$('#fGame').value||'-'}
UID/Player ID: ${$('#fUid').value||'-'}
‡∏ß‡∏¥‡∏ò‡∏µ‡∏ä‡∏≥‡∏£‡∏∞: ${$('#fMethod').value}
‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£:
${items}
‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°: ${money(sum)}
‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ${$('#fNote').value||'-'}
‡πÇ‡∏õ‡∏£‡∏î‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏•‡∏¥‡∏õ‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö`;

    const url = ADMIN_URL + (ADMIN_URL.includes('?')?'&':'?') + 'text=' + encodeURIComponent(msg);
    window.open(url,'_blank');
    try{ await navigator.clipboard.writeText(msg); }catch{}
    alert('‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏ö‡∏¥‡∏•‡πÉ‡∏´‡πâ‡πÅ‡∏•‡πâ‡∏ß! ‡∏ñ‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏°‡πà‡∏Ç‡∏∂‡πâ‡∏ô‡πÉ‡∏ô‡πÅ‡∏ä‡∏ó ‡πÉ‡∏´‡πâ‡∏Å‡∏î‡∏ß‡∏≤‡∏á (Paste) ‡πÅ‡∏•‡∏∞‡πÅ‡∏ô‡∏ö‡∏™‡∏•‡∏¥‡∏õ‡∏î‡πâ‡∏ß‡∏¢');
    setLoader(false);
  }, 600);
};
</script>
</body>
</html>
