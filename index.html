<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0b0f0c" />
  <title>EVAN VALE TOPUP ‚Äî ‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏Å‡∏°</title>
  <style>
    :root{
      --bg:#0b0f0c; --bg2:#0f1713; --card:#101b16; --card2:#0f1a14;
      --text:#f6fff6; --muted:#b9d1bd; --border:#233428;
      --brand:#e53935; --brand2:#36c06b; --accent:#ffd166;
      --shadow:0 18px 50px rgba(0,0,0,.55);
      --r:18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; color:var(--text); font-family:system-ui,Segoe UI,Prompt,sans-serif;
      background:
        radial-gradient(900px 500px at 0% 0%, #1b3323 0%, transparent 60%),
        radial-gradient(900px 500px at 100% 0%, #3a1f1f 0%, transparent 60%),
        linear-gradient(180deg,var(--bg),var(--bg2));
    }
    a{color:inherit; text-decoration:none}
    .wrap{max-width:1100px;margin:auto;padding:18px}
    .nav{
      position:sticky; top:12px; z-index:10;
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      background:linear-gradient(180deg,#131f18,#0f1713);
      border:1px solid var(--border); border-radius:18px; padding:10px 12px;
      box-shadow:var(--shadow); backdrop-filter: blur(10px);
    }
    .brand{display:flex; gap:10px; align-items:center}
    .logo{
      width:40px;height:40px;border-radius:12px;
      background:conic-gradient(from 210deg,var(--brand),var(--brand2),var(--accent),var(--brand));
      display:grid; place-items:center; color:#190c0c; font-weight:900;
      box-shadow:0 0 16px rgba(255,209,102,.25);
    }
    .title{font-weight:900; letter-spacing:.3px}
    .tag{font-size:12px; color:#ffe6a8; border:1px solid #2d442f; background:#142015; padding:3px 8px; border-radius:999px}
    .tools{display:flex; gap:8px; flex-wrap:wrap; align-items:center}
    .btn{
      border:1px solid var(--border); background:linear-gradient(180deg,#14211a,#0f1713);
      color:var(--text); padding:9px 12px; border-radius:12px;
      font-weight:800; cursor:pointer;
    }
    .btn.primary{
      border:none;
      background:linear-gradient(90deg,var(--brand),var(--brand2));
      color:#190c0c;
      box-shadow:0 0 18px rgba(54,192,107,.18), 0 0 18px rgba(255,209,102,.15);
    }
    .btn[disabled]{opacity:.55; cursor:not-allowed}
    .grid{display:grid; gap:14px}
    .hero{
      margin-top:14px;
      display:grid; grid-template-columns: 1.6fr 1fr; gap:14px;
    }
    .card{
      background:linear-gradient(180deg,rgba(16,27,22,.9),rgba(14,24,18,.88));
      border:1px solid var(--border); border-radius:var(--r);
      padding:16px; box-shadow:var(--shadow); backdrop-filter: blur(10px);
    }
    .muted{color:var(--muted)}
    h1{margin:0 0 6px; font-size:26px}
    h2{margin:0 0 10px; font-size:18px}
    .pillrow{display:flex; gap:8px; flex-wrap:wrap; margin-top:10px}
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 10px; border-radius:999px; border:1px solid var(--border);
      background:#132017; cursor:pointer; font-weight:800;
    }
    .pill.active{background:linear-gradient(90deg,var(--brand),var(--brand2)); color:#190c0c; border:none}
    .cols{display:grid; grid-template-columns: 1fr 1fr; gap:14px; align-items:start}
    .section{margin-top:14px}
    .tabs{display:flex; gap:8px; flex-wrap:wrap}
    .tab{
      padding:8px 12px; border-radius:999px; border:1px solid var(--border);
      background:#132017; cursor:pointer; font-weight:900;
    }
    .tab.active{background:linear-gradient(90deg,var(--brand),var(--brand2)); color:#190c0c; border:none}
    .pkggrid{display:grid; grid-template-columns:repeat(auto-fit,minmax(170px,1fr)); gap:12px}
    .pkg{
      background:#101f17; border:1px solid var(--border); border-radius:16px;
      padding:12px; display:grid; gap:8px;
    }
    .pkg .name{font-weight:900}
    .pkg .price{font-weight:900; font-size:20px}
    label{display:block; font-weight:800; margin:0 0 6px; color:#d7f1db}
    input,select,textarea{
      width:100%; padding:12px; border-radius:12px;
      border:1px solid var(--border); background:#0f1713; color:var(--text);
      outline:none;
    }
    .row{display:grid; grid-template-columns:1fr 1fr; gap:12px}
    .sum{
      position:sticky; top:90px;
    }
    .line{display:flex; justify-content:space-between; gap:10px; padding:6px 0; border-bottom:1px dashed rgba(255,255,255,.08)}
    .line:last-child{border-bottom:0}
    .total{font-size:22px; font-weight:900}
    .small{font-size:12px}
    .divider{height:1px; background:linear-gradient(90deg,transparent,rgba(255,255,255,.12),transparent); margin:12px 0}
    .toast{
      position:fixed; left:50%; bottom:16px; transform:translateX(-50%);
      background:#132017; border:1px solid var(--border);
      padding:10px 14px; border-radius:12px; box-shadow:var(--shadow);
      display:none; z-index:99;
    }
    .toast.show{display:block}
    .cartitem{
      display:flex; justify-content:space-between; gap:10px; align-items:start;
      padding:10px; border-radius:14px; border:1px solid rgba(255,255,255,.06);
      background:#0f1913;
    }
    .cartitem b{display:block}
    .carttools{display:flex; gap:8px; flex-wrap:wrap; margin-top:10px}
    table{width:100%; border-collapse:collapse}
    th,td{padding:10px; border-bottom:1px solid rgba(255,255,255,.07); text-align:left; vertical-align:top}
    th{color:#ffe6a8}
    .tablewrap{overflow:auto}
    @media (max-width: 980px){
      .hero{grid-template-columns:1fr}
      .cols{grid-template-columns:1fr}
      .sum{position:static}
    }
    @media (max-width: 480px){
      .wrap{padding:14px}
      h1{font-size:22px}
      .tools .btn{width:100%}
      .tools{display:grid; grid-template-columns:1fr 1fr; gap:8px}
      .tools .btn.primary{grid-column:1 / -1}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <nav class="nav">
      <div class="brand">
        <div class="logo">EV</div>
        <div>
          <div class="title">EVAN VALE TOPUP</div>
          <div class="tag">‡πÄ‡∏ï‡∏¥‡∏°‡∏á‡πà‡∏≤‡∏¢ ‚Ä¢ ‡∏™‡πà‡∏á‡∏ö‡∏¥‡∏•‡πÑ‡∏ß ‚Ä¢ ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏î‡∏π‡πÅ‡∏•</div>
        </div>
      </div>
      <div class="tools">
        <button class="btn" data-page="topup">‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏Å‡∏°</button>
        <button class="btn" data-page="angpao">‡∏≠‡∏±‡πà‡∏á‡πÄ‡∏õ‡∏≤</button>
        <button class="btn" data-page="history">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</button>
        <a class="btn primary" id="btnAdmin" target="_blank" rel="noopener">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô</a>
      </div>
    </nav>

    <section class="hero">
      <div class="card">
        <h1>‡∏£‡πâ‡∏≤‡∏ô‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏Å‡∏°‡πÅ‡∏ö‡∏ö ‚Äú‡∏Å‡∏î‡∏á‡πà‡∏≤‡∏¢‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏ß‡πá‡∏ö‡∏î‡∏±‡∏á‚Äù üòè</h1>
        <div class="muted">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Å‡∏° ‚Üí ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏û‡πá‡∏Å ‚Üí ‡πÉ‡∏™‡πà UID ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏¥‡∏• ‚Üí ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏õ‡∏ó‡∏±‡∏Å‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô (‡∏´‡∏£‡∏∑‡∏≠‡∏™‡πà‡∏á‡πÄ‡∏°‡∏•)</div>
        <div class="pillrow" id="quickCats"></div>
        <div class="divider"></div>
        <div class="muted small">‡∏ó‡∏¥‡∏õ: ‡∏ñ‡πâ‡∏≤‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÇ‡∏Ñ‡∏ï‡∏£‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡∏à‡∏£‡∏¥‡∏á ‡πÜ ‡πÉ‡∏´‡πâ‡πÄ‡∏≠‡∏≤ ‚Äú‡πÅ‡∏û‡πá‡∏Å‡∏¢‡∏≠‡∏î‡∏Æ‡∏¥‡∏ï‚Äù ‡πÑ‡∏ß‡πâ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å‡πÅ‡∏ö‡∏ö Quick Buy</div>
      </div>
      <div class="card">
        <h2>‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</h2>
        <div id="cartList" class="grid" style="gap:10px"></div>
        <div class="divider"></div>
        <div class="line"><span class="muted">‡∏£‡∏ß‡∏°</span><span class="total" id="cartTotal">‡∏ø0</span></div>
        <div class="carttools">
          <button class="btn" id="btnClearCart">‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</button>
          <button class="btn primary" id="btnGoCheckout">‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏¥‡∏•</button>
        </div>
        <div class="muted small" style="margin-top:8px">*‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤/‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥ ‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (‡πÄ‡∏ß‡πá‡∏ö‡∏™‡πÅ‡∏ï‡∏ï‡∏¥‡∏Å‡∏Å‡πá‡∏ó‡∏≥‡πÑ‡∏î‡πâ)</div>
      </div>
    </section>

    <!-- PAGE: TOPUP -->
    <section class="section" id="page-topup">
      <div class="card">
        <div class="tabs" id="gameTabs"></div>
        <div class="divider"></div>
        <div class="row">
          <div>
            <label>‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå/‡πÇ‡∏ã‡∏ô</label>
            <select id="server"></select>
          </div>
          <div>
            <label>‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏û‡πá‡∏Å (‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠/‡∏£‡∏≤‡∏Ñ‡∏≤)</label>
            <input id="pkgSearch" placeholder="‡πÄ‡∏ä‡πà‡∏ô 310 ‡∏´‡∏£‡∏∑‡∏≠ ‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ‡∏´‡∏£‡∏∑‡∏≠ 285">
          </div>
        </div>
        <div style="height:10px"></div>
        <div class="pkggrid" id="pkgGrid"></div>
      </div>

      <div class="cols section">
        <div class="card">
          <h2>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ï‡∏¥‡∏° (‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß)</h2>
          <div class="row">
            <div>
              <label>UID / Player ID</label>
              <input id="uid" placeholder="‡πÄ‡∏ä‡πà‡∏ô 812345678">
            </div>
            <div>
              <label>‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ (Line/FB/‡πÄ‡∏ö‡∏≠‡∏£‡πå)</label>
              <input id="contact" placeholder="‡πÄ‡∏ä‡πà‡∏ô @evanvale / FB link">
            </div>
          </div>
          <div class="row" style="margin-top:10px">
            <div>
              <label>‡∏ß‡∏¥‡∏ò‡∏µ‡∏ä‡∏≥‡∏£‡∏∞</label>
              <select id="payMethod">
                <option>PromptPay</option>
                <option>TrueMoney Wallet</option>
                <option>‡πÇ‡∏≠‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£</option>
              </select>
            </div>
            <div>
              <label>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)</label>
              <input id="note" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏Ç‡∏≠‡πÄ‡∏ï‡∏¥‡∏°‡∏î‡πà‡∏ß‡∏ô / ‡∏°‡∏µ‡∏™‡∏•‡∏¥‡∏õ‡πÅ‡∏•‡πâ‡∏ß">
            </div>
          </div>

          <div class="divider"></div>

          <h2>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏¥‡∏• / ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h2>
          <div class="row">
            <button class="btn primary" id="btnCreateBill">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏¥‡∏•</button>
            <button class="btn" id="btnCopyBill" disabled>‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°</button>
          </div>
          <div class="row" style="margin-top:10px">
            <button class="btn" id="btnEmailBill" disabled>‡∏™‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤ Gmail</button>
            <button class="btn" id="btnOpenChat" disabled>‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏ä‡∏ó‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô</button>
          </div>

          <textarea id="billPreview" rows="10" style="margin-top:10px; display:none" readonly></textarea>
          <div class="muted small" style="margin-top:8px">
            *‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡πÄ‡∏ß‡πá‡∏ö‡∏™‡πÅ‡∏ï‡∏ï‡∏¥‡∏Å‡∏™‡πà‡∏á‡πÄ‡∏°‡∏•‡πÄ‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏£‡πà‡∏≤‡∏á‡πÄ‡∏°‡∏•‡πÉ‡∏´‡πâ‡πÑ‡∏î‡πâ (‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏ô‡∏ö‡∏™‡∏•‡∏¥‡∏õ‡πÄ‡∏≠‡∏á)
          </div>
        </div>

        <aside class="card sum">
          <h2>‡∏™‡∏£‡∏∏‡∏õ‡∏ö‡∏¥‡∏•</h2>
          <div class="line"><span class="muted">‡πÄ‡∏•‡∏Ç‡∏ö‡∏¥‡∏•</span><span id="sumId">-</span></div>
          <div class="line"><span class="muted">‡πÄ‡∏Å‡∏°</span><span id="sumGame">-</span></div>
          <div class="line"><span class="muted">‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå</span><span id="sumServer">-</span></div>
          <div class="line"><span class="muted">UID</span><span id="sumUid">-</span></div>
          <div class="divider"></div>
          <div class="line"><span class="muted">‡∏£‡∏ß‡∏°</span><span class="total" id="sumTotal">‡∏ø0</span></div>
          <div class="muted small" style="margin-top:8px">‡∏Å‡∏î ‚Äú‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏¥‡∏•‚Äù ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏õ‡∏ó‡∏±‡∏Å‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢</div>
        </aside>
      </div>
    </section>

    <!-- PAGE: ANGPAO -->
    <section class="section" id="page-angpao" style="display:none">
      <div class="card">
        <h2>‡∏≠‡∏±‡πà‡∏á‡πÄ‡∏õ‡∏≤ (Angpao) ‚Äî ‡∏™‡∏∏‡πà‡∏°‡πÇ‡∏Ñ‡πâ‡∏î / ‡∏™‡∏∏‡πà‡∏°‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î</h2>
        <div class="muted">‡∏Å‡∏î‡∏™‡∏∏‡πà‡∏°‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏î‡πâ ‚Äú‡πÇ‡∏Ñ‡πâ‡∏î‚Äù ‡πÄ‡∏≠‡∏≤‡πÑ‡∏õ‡πÉ‡∏™‡πà‡πÉ‡∏ô‡πÅ‡∏ä‡∏ó‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏Ñ‡∏°‡πÄ‡∏õ‡∏ç‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</div>
        <div class="divider"></div>

        <div class="row">
          <div>
            <label>‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡πÑ‡∏î‡πâ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î</label>
            <select id="angChance">
              <option value="0.20">20%</option>
              <option value="0.30" selected>30%</option>
              <option value="0.40">40%</option>
              <option value="0.50">50%</option>
            </select>
          </div>
          <div>
            <label>‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡∏ó‡∏µ‡πà‡∏™‡∏∏‡πà‡∏°‡πÑ‡∏î‡πâ (‡∏ö‡∏≤‡∏ó)</label>
            <input id="angAmounts" value="3,5,10,15" />
          </div>
        </div>

        <div class="divider"></div>

        <div class="row">
          <button class="btn primary" id="btnAngpao">‡∏™‡∏∏‡πà‡∏°‡∏≠‡∏±‡πà‡∏á‡πÄ‡∏õ‡∏≤</button>
          <button class="btn" id="btnCopyAng" disabled>‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î</button>
        </div>

        <div class="divider"></div>

        <div class="pkg" style="max-width:520px">
          <div class="name">‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡πà‡∏°</div>
          <div class="muted small" id="angResultHint">‡∏Å‡∏î‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡πÇ‡∏Ñ‡πâ‡∏î</div>
          <div class="price" id="angResult">‚Äî</div>
          <div class="muted" id="angDetail" style="white-space:pre-wrap"></div>
        </div>
      </div>
    </section>

    <!-- PAGE: HISTORY -->
    <section class="section" id="page-history" style="display:none">
      <div class="card">
        <h2>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ (‡∏ö‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ)</h2>
        <div class="row">
          <input id="histSearch" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏•‡∏Ç‡∏ö‡∏¥‡∏•/UID/‡πÄ‡∏Å‡∏°" />
          <button class="btn" id="btnClearHistory">‡∏•‡πâ‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
        </div>
        <div class="divider"></div>
        <div class="tablewrap">
          <table>
            <thead>
              <tr>
                <th>‡πÄ‡∏ß‡∏•‡∏≤</th><th>‡πÄ‡∏•‡∏Ç‡∏ö‡∏¥‡∏•</th><th>‡πÄ‡∏Å‡∏°</th><th>‡∏¢‡∏≠‡∏î</th><th>UID</th><th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th><th>‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠</th>
              </tr>
            </thead>
            <tbody id="histBody"></tbody>
          </table>
        </div>
        <div class="muted" id="histEmpty" style="display:none; padding-top:10px">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</div>
      </div>
    </section>

    <div class="toast" id="toast"></div>
  </div>

<script>
/* =====================
   CONFIG (‡πÅ‡∏Å‡πâ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ)
===================== */
const ADMIN_CHAT_URL = "https://www.facebook.com/share/1JRkDmJDvX/"; // ‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÅ‡∏ä‡∏ó‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô
const ADMIN_EMAIL    = "yourshop@gmail.com";                          // ‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏° Gmail)

/* =====================
   DATA: Games / Packs
   (‡πÇ‡∏Ñ‡∏£‡∏á‡πÅ‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏≠‡∏á‡∏á‡πà‡∏≤‡∏¢)
===================== */
const GAMES = [
  { key:"Free Fire", icon:"üî•", servers:["Thailand","SEA","Global"] },
  { key:"RoV", icon:"üõ°Ô∏è", servers:["Thailand","Vietnam","Taiwan"] },
  { key:"PUBG Mobile", icon:"üéØ", servers:["Thailand","SEA","KRJP","Global"] },
  { key:"Roblox", icon:"üß±", servers:["Thailand","Asia","USA","Global"] },
  { key:"Genshin Impact", icon:"‚ú®", servers:["Asia","America","Europe","TW/HK/MO"] },
];

const PACKS = {
  "Free Fire": [
    {name:"33 ‡πÄ‡∏û‡∏ä‡∏£", price:11}, {name:"68 ‡πÄ‡∏û‡∏ä‡∏£", price:21}, {name:"172 ‡πÄ‡∏û‡∏ä‡∏£", price:49},
    {name:"310 ‡πÄ‡∏û‡∏ä‡∏£", price:87}, {name:"517 ‡πÄ‡∏û‡∏ä‡∏£", price:145}, {name:"690 ‡πÄ‡∏û‡∏ä‡∏£", price:195},
    {name:"‡∏ö‡∏π‡∏¢‡πà‡∏≤‡∏´‡πå‡∏û‡∏≤‡∏™", price:90}, {name:"‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô", price:287},
  ],
  "RoV": [
    {name:"11 ‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á", price:10}, {name:"24 ‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á", price:19}, {name:"60 ‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á", price:49},
    {name:"110 ‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á", price:87}, {name:"370 ‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á", price:285}, {name:"620 ‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á", price:478},
  ],
  "PUBG Mobile": [
    {name:"60 UC", price:35}, {name:"325 UC", price:179}, {name:"660 UC", price:346},
    {name:"1800 UC", price:860}, {name:"3850 UC", price:1696},
  ],
  "Roblox": [
    {name:"80 Robux", price:35}, {name:"160 Robux", price:70}, {name:"400 Robux", price:175},
    {name:"800 Robux", price:350}, {name:"1000 Robux", price:400}, {name:"2000 Robux", price:600},
  ],
  "Genshin Impact": [
    {name:"60 Genesis", price:30}, {name:"300+30 Genesis", price:145},
    {name:"980+110 Genesis", price:420}, {name:"Blessing (‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô)", price:179},
  ],
};

/* =====================
   STORAGE
===================== */
const KEY_CART = "ev_cart_v1";
const KEY_HIST = "ev_hist_v1";

const load = (k, fallback) => {
  try{ return JSON.parse(localStorage.getItem(k) || JSON.stringify(fallback)); }
  catch{ return fallback; }
};
const save = (k, v) => localStorage.setItem(k, JSON.stringify(v));

/* =====================
   UTIL
===================== */
const $ = (id)=>document.getElementById(id);
const money = (n)=>"‡∏ø"+(Number(n)||0);
const toast = (msg)=>{
  const t = $("toast");
  t.textContent = msg;
  t.classList.add("show");
  setTimeout(()=>t.classList.remove("show"), 2200);
};
const pad2 = (n)=>String(n).padStart(2,"0");
const genBillId = ()=>{
  const d=new Date();
  const ts=`${d.getFullYear()}${pad2(d.getMonth()+1)}${pad2(d.getDate())}-${pad2(d.getHours())}${pad2(d.getMinutes())}${pad2(d.getSeconds())}`;
  return `EV-${ts}-${Math.floor(Math.random()*9000+1000)}`;
};
const copySafe = async (text)=>{
  try{ await navigator.clipboard.writeText(text); return true; }
  catch{
    const ta=document.createElement("textarea");
    ta.value=text; ta.style.position="fixed"; ta.style.opacity="0";
    document.body.appendChild(ta); ta.focus(); ta.select();
    let ok=false; try{ ok=document.execCommand("copy"); }catch{}
    document.body.removeChild(ta);
    return ok;
  }
};

/* =====================
   STATE
===================== */
let page = "topup";
let currentGame = GAMES[0].key;
let cart = load(KEY_CART, []);
let history = load(KEY_HIST, []);
let currentBill = null;

/* =====================
   NAV / PAGES
===================== */
$("btnAdmin").href = ADMIN_CHAT_URL;

document.querySelectorAll("[data-page]").forEach(b=>{
  b.addEventListener("click", ()=> setPage(b.dataset.page));
});

function setPage(p){
  page = p;
  $("page-topup").style.display  = (p==="topup")  ? "" : "none";
  $("page-angpao").style.display = (p==="angpao") ? "" : "none";
  $("page-history").style.display= (p==="history")? "" : "none";

  document.querySelectorAll("[data-page]").forEach(x=>{
    x.classList.toggle("primary", x.dataset.page===p);
  });

  if(p==="history") renderHistory();
  window.scrollTo({top:0, behavior:"smooth"});
}

/* =====================
   QUICK CATS (‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å)
===================== */
const quickCats = $("quickCats");
function renderQuickCats(){
  quickCats.innerHTML = "";
  GAMES.forEach(g=>{
    const btn = document.createElement("div");
    btn.className = "pill" + (g.key===currentGame ? " active" : "");
    btn.textContent = `${g.icon} ${g.key}`;
    btn.onclick = ()=> { currentGame=g.key; renderAll(); toast(`‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Å‡∏°: ${g.key}`); };
    quickCats.appendChild(btn);
  });
}
renderQuickCats();

/* =====================
   TABS / PACKAGES
===================== */
const gameTabs = $("gameTabs");
function renderGameTabs(){
  gameTabs.innerHTML = "";
  GAMES.forEach(g=>{
    const t=document.createElement("div");
    t.className="tab"+(g.key===currentGame?" active":"");
    t.textContent = `${g.icon} ${g.key}`;
    t.onclick = ()=> { currentGame=g.key; renderAll(); };
    gameTabs.appendChild(t);
  });
}
function renderServers(){
  const s = $("server");
  s.innerHTML = "";
  const list = (GAMES.find(x=>x.key===currentGame)?.servers)||["Global"];
  list.forEach(z=>{
    const o=document.createElement("option");
    o.value=z; o.textContent=z;
    s.appendChild(o);
  });
}
function renderPackages(){
  const q = ($("pkgSearch").value||"").trim().toLowerCase();
  const grid = $("pkgGrid");
  grid.innerHTML = "";
  (PACKS[currentGame]||[]).filter(p=>{
    if(!q) return true;
    return (`${p.name} ${p.price}`).toLowerCase().includes(q);
  }).forEach(p=>{
    const el=document.createElement("div");
    el.className="pkg";
    el.innerHTML = `
      <div class="name">${p.name}</div>
      <div class="price">${money(p.price)}</div>
      <button class="btn primary" type="button">‡πÉ‡∏™‡πà‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</button>
    `;
    el.querySelector("button").onclick = ()=>{
      const server = $("server").value || "-";
      cart.push({ game: currentGame, server, name:p.name, price:p.price, qty:1 });
      save(KEY_CART, cart);
      renderCart();
      updateSummary();
      toast("‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡πÅ‡∏•‡πâ‡∏ß ‚úÖ");
    };
    grid.appendChild(el);
  });
}
$("pkgSearch").addEventListener("input", renderPackages);

/* =====================
   CART
===================== */
function cartTotal(){
  return cart.reduce((sum,i)=> sum + (i.price*i.qty), 0);
}
function renderCart(){
  const list = $("cartList");
  list.innerHTML = "";
  if(!cart.length){
    list.innerHTML = `<div class="muted">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡∏≠‡∏á‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</div>`;
    $("cartTotal").textContent = money(0);
    return;
  }
  cart.forEach((i,idx)=>{
    const row=document.createElement("div");
    row.className="cartitem";
    row.innerHTML = `
      <div>
        <b>${i.game}</b>
        <div class="muted">${i.server} ‚Ä¢ ${i.name}</div>
        <div class="muted small">‡∏ø${i.price} x ${i.qty}</div>
      </div>
      <div style="display:grid; gap:6px; justify-items:end">
        <div style="font-weight:900">${money(i.price*i.qty)}</div>
        <div style="display:flex; gap:6px; flex-wrap:wrap; justify-content:flex-end">
          <button class="btn" type="button" data-act="minus">-</button>
          <button class="btn" type="button" data-act="plus">+</button>
          <button class="btn" type="button" data-act="del">‡∏•‡∏ö</button>
        </div>
      </div>
    `;
    row.querySelector('[data-act="minus"]').onclick=()=>{
      i.qty = Math.max(1, i.qty-1);
      save(KEY_CART, cart); renderCart(); updateSummary();
    };
    row.querySelector('[data-act="plus"]').onclick=()=>{
      i.qty += 1;
      save(KEY_CART, cart); renderCart(); updateSummary();
    };
    row.querySelector('[data-act="del"]').onclick=()=>{
      cart.splice(idx,1);
      save(KEY_CART, cart); renderCart(); updateSummary();
    };
    list.appendChild(row);
  });
  $("cartTotal").textContent = money(cartTotal());
}
$("btnClearCart").onclick = ()=>{
  cart = [];
  save(KEY_CART, cart);
  renderCart(); updateSummary();
  toast("‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡πÅ‡∏•‡πâ‡∏ß");
};
$("btnGoCheckout").onclick = ()=>{
  setPage("topup");
  document.querySelector("#page-topup").scrollIntoView({behavior:"smooth"});
};

/* =====================
   SUMMARY + BILL
===================== */
function updateSummary(){
  $("sumGame").textContent = currentGame;
  $("sumServer").textContent = $("server").value || "-";
  $("sumUid").textContent = ($("uid").value||"-").trim() || "-";
  $("sumTotal").textContent = money(cartTotal());
}
["uid","contact","payMethod","note","server"].forEach(id=>{
  $(id).addEventListener("input", updateSummary);
  $(id).addEventListener("change", updateSummary);
});

function buildBillText(bill){
  const lines = [];
  lines.push("EVAN VALE TOPUP");
  lines.push(`‡πÄ‡∏•‡∏Ç‡∏ö‡∏¥‡∏•: ${bill.id}`);
  lines.push(`‡πÄ‡∏ß‡∏•‡∏≤: ${new Date(bill.ts).toLocaleString()}`);
  lines.push(`‡∏ß‡∏¥‡∏ò‡∏µ‡∏ä‡∏≥‡∏£‡∏∞: ${bill.payMethod}`);
  lines.push(`UID: ${bill.uid || "-"}`);
  lines.push(`‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠: ${bill.contact || "-"}`);
  if(bill.note) lines.push(`‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ${bill.note}`);
  lines.push("");
  lines.push("‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£:");
  bill.items.forEach((i,n)=>{
    lines.push(`${n+1}) ${i.game} | ${i.server} | ${i.name} x${i.qty} = ‡∏ø${i.price*i.qty}`);
  });
  lines.push("");
  lines.push(`‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô: ‡∏ø${bill.total}`);
  lines.push("");
  lines.push("‡πÅ‡∏ô‡∏ö‡∏™‡∏•‡∏¥‡∏õ/‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡∏™‡πà‡∏á‡πÉ‡∏´‡πâ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ö");
  return lines.join("\n");
}

$("btnCreateBill").onclick = ()=>{
  const uid = ($("uid").value||"").trim();
  const contact = ($("contact").value||"").trim();
  if(!cart.length){ toast("‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏ß‡πà‡∏≤‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏≠‡∏´‡∏°‡∏≤ üòë"); return; }
  if(!uid){ toast("‡πÉ‡∏™‡πà UID ‡∏Å‡πà‡∏≠‡∏ô"); return; }
  if(!contact){ toast("‡πÉ‡∏™‡πà‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡∏Å‡πà‡∏≠‡∏ô"); return; }

  currentBill = {
    id: genBillId(),
    ts: Date.now(),
    payMethod: $("payMethod").value,
    uid, contact,
    note: ($("note").value||"").trim(),
    items: cart.map(x=>({...x})),
    total: cartTotal(),
    status: "‡∏£‡∏≠‡∏ä‡∏≥‡∏£‡∏∞"
  };

  $("sumId").textContent = currentBill.id;
  $("billPreview").style.display = "";
  $("billPreview").value = buildBillText(currentBill);

  $("btnCopyBill").disabled = false;
  $("btnOpenChat").disabled = false;
  $("btnEmailBill").disabled = false;

  // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥
  history.unshift(currentBill);
  save(KEY_HIST, history);

  toast("‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏¥‡∏•‡πÅ‡∏•‡πâ‡∏ß ‚úÖ");
};

$("btnCopyBill").onclick = async ()=>{
  if(!currentBill) return;
  const ok = await copySafe(buildBillText(currentBill));
  toast(ok ? "‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß ‚úÖ ‡πÑ‡∏õ‡∏ß‡∏≤‡∏á‡πÉ‡∏ô‡πÅ‡∏ä‡∏ó‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢" : "‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏•‡∏≠‡∏á‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏Å‡∏•‡πà‡∏≠‡∏á");
};

$("btnOpenChat").onclick = ()=>{
  window.open(ADMIN_CHAT_URL, "_blank");
};

$("btnEmailBill").onclick = ()=>{
  if(!currentBill) return;
  const subject = `EVAN VALE ‚Ä¢ ‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡πÄ‡∏ï‡∏¥‡∏° #${currentBill.id}`;
  const body = buildBillText(currentBill) + "\n\n‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡πÅ‡∏ô‡∏ö‡∏™‡∏•‡∏¥‡∏õ‡πÉ‡∏ô‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ô‡∏µ‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö";
  const url = `mailto:${encodeURIComponent(ADMIN_EMAIL)}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
  window.location.href = url;
};

/* =====================
   ANGPAO
===================== */
let lastAngText = "";
function parseAmounts(text){
  return (text||"")
    .split(",")
    .map(x=>Number(String(x).trim()))
    .filter(n=>Number.isFinite(n) && n>0)
    .slice(0,20);
}
function genCode(){
  const chars="ABCDEFGHJKLMNPQRSTUVWXYZ23456789";
  let s="EV-";
  for(let i=0;i<10;i++) s += chars[Math.floor(Math.random()*chars.length)];
  return s;
}

$("btnAngpao").onclick = ()=>{
  const chance = Number($("angChance").value || 0.3);
  const amounts = parseAmounts($("angAmounts").value);
  if(!amounts.length){ toast("‡πÉ‡∏™‡πà‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏Å‡πà‡∏≠‡∏ô"); return; }

  const code = genCode();
  const win = Math.random() < chance;

  if(win){
    const discount = amounts[Math.floor(Math.random()*amounts.length)];
    lastAngText =
`üéÅ EVAN VALE ANGPAO
‡πÇ‡∏Ñ‡πâ‡∏î: ${code}
‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•: ‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î ${discount} ‡∏ö‡∏≤‡∏ó
‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç: ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á/‡∏ö‡∏¥‡∏• ‚Ä¢ ‡∏™‡πà‡∏á‡πÇ‡∏Ñ‡πâ‡∏î‡∏ô‡∏µ‡πâ‡πÉ‡∏´‡πâ‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏ï‡∏≠‡∏ô‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠`;
    $("angResultHint").textContent = "‡πÑ‡∏î‡πâ‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡πÅ‡∏•‡πâ‡∏ß!";
    $("angResult").textContent = `‡∏•‡∏î ${discount} ‡∏ö‡∏≤‡∏ó`;
    $("angDetail").textContent = lastAngText;
    toast("‡πÄ‡∏Æ‡πâ‡∏¢! ‡πÑ‡∏î‡πâ‡∏≠‡∏±‡πà‡∏á‡πÄ‡∏õ‡∏≤ üéâ");
  }else{
    lastAngText =
`üéÅ EVAN VALE ANGPAO
‡πÇ‡∏Ñ‡πâ‡∏î: ${code}
‡∏ú‡∏•: ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• (‡πÑ‡∏ß‡πâ‡∏™‡∏∏‡πà‡∏°‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ)
‡∏ó‡∏¥‡∏õ: ‡∏•‡∏≠‡∏á‡∏≠‡∏µ‡∏Å‡∏ó‡∏µ ‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏î‡∏ß‡∏á‡∏°‡∏≤ üòè`;
    $("angResultHint").textContent = "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•";
    $("angResult").textContent = "‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•";
    $("angDetail").textContent = lastAngText;
    toast("‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• ‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ üòè");
  }

  $("btnCopyAng").disabled = false;
};

$("btnCopyAng").onclick = async ()=>{
  if(!lastAngText) return;
  const ok = await copySafe(lastAngText);
  toast(ok ? "‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÇ‡∏Ñ‡πâ‡∏î‡∏≠‡∏±‡πà‡∏á‡πÄ‡∏õ‡∏≤‡πÅ‡∏•‡πâ‡∏ß ‚úÖ" : "‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
};

/* =====================
   HISTORY
===================== */
function renderHistory(){
  const q = ($("histSearch").value||"").trim().toLowerCase();
  const body = $("histBody");
  body.innerHTML = "";
  const list = history.filter(h=>{
    if(!q) return true;
    return (h.id+h.uid+(h.items?.[0]?.game||"")).toLowerCase().includes(q);
  });

  $("histEmpty").style.display = list.length ? "none" : "";

  list.forEach((h,idx)=>{
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${new Date(h.ts).toLocaleString()}</td>
      <td>${h.id}</td>
      <td>${h.items?.[0]?.game || "-" }${(h.items?.length>1)?` (+${h.items.length-1})`:""}</td>
      <td>‡∏ø${h.total}</td>
      <td>${h.uid || "-"}</td>
      <td>${h.status || "-"}</td>
      <td style="white-space:nowrap">
        <button class="btn" type="button" data-act="view">‡∏î‡∏π</button>
        <button class="btn" type="button" data-act="copy">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å</button>
        <button class="btn" type="button" data-act="del">‡∏•‡∏ö</button>
      </td>
    `;
    tr.querySelector('[data-act="view"]').onclick=()=>{
      alert(buildBillText(h));
    };
    tr.querySelector('[data-act="copy"]').onclick= async ()=>{
      const ok = await copySafe(buildBillText(h));
      toast(ok ? "‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏ö‡∏¥‡∏•‡πÅ‡∏•‡πâ‡∏ß ‚úÖ" : "‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
    };
    tr.querySelector('[data-act="del"]').onclick=()=>{
      history.splice(idx,1);
      save(KEY_HIST, history);
      renderHistory();
      toast("‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß");
    };
    body.appendChild(tr);
  });
}
$("histSearch").addEventListener("input", renderHistory);

$("btnClearHistory").onclick = ()=>{
  if(!confirm("‡∏•‡πâ‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ö‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ?")) return;
  history = [];
  save(KEY_HIST, history);
  renderHistory();
  toast("‡∏•‡πâ‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß");
};

/* =====================
   INIT
===================== */
function renderAll(){
  renderQuickCats();
  renderGameTabs();
  renderServers();
  renderPackages();
  renderCart();
  updateSummary();
}
renderAll();
</script>
</body>
</html>
